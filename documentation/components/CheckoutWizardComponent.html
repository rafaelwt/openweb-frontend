<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>openweb-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">openweb-frontend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  CheckoutWizardComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts</code>
</p>


    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>Multi-step checkout wizard for payment processing.</p>
<p>Handles the following workflow:</p>
<ol>
<li><strong>Step 1</strong>: Cart review (view items, remove items, add more)</li>
<li><strong>Step 2</strong>: Payment method selection (QR Simple / QR con Comisión)</li>
<li><strong>Step 3</strong>: Billing information form (NIT validation, email, phone)</li>
<li><strong>Step 4</strong>: Payment processing (generate QR code via API)</li>
<li><strong>Step 5</strong>: QR code display (download, restart)</li>
</ol>
<p><strong>Key features:</strong></p>
<ul>
<li>Integrates with CartService for cart state</li>
<li>Uses FingerprintService for browser identification (fraud prevention)</li>
<li>Validates NIT via API (special NITs: 99001, 99002, 99003)</li>
<li>Generates QR codes for bank app payment</li>
<li>Uses Decimal.js for precise currency calculations</li>
<li>Handles API errors via ErrorModalService</li>
</ul>
<p><strong>Payment methods:</strong></p>
<ul>
<li><strong>QR Simple</strong>: No commission, no billing required (uses default &quot;Control Tributario&quot;)</li>
<li><strong>QR con Comisión</strong>: Includes commission, requires valid NIT and billing data</li>
</ul>
<p>See <a href="../injectables/CartService.html">CartService</a>
See <a href="../injectables/FingerprintService.html">FingerprintService</a>
See <a href="../injectables/ApiService.html">ApiService</a></p>

    </p>


    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                <code>OnInit</code>
    </p>


<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>

            <tr>
                <td class="col-md-3">changeDetection</td>
                <td class="col-md-9"><code>ChangeDetectionStrategy.OnPush</code></td>
            </tr>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-checkout-wizard</code></td>
            </tr>


            <tr>
                <td class="col-md-3">imports</td>
                <td class="col-md-9">
                            <code>ReactiveFormsModule</code>
                                <code><a href="../components/LoadingComponent.html" target="_self" >LoadingComponent</a></code>
                                <code><a href="../components/QrDisplayComponent.html" target="_self" >QrDisplayComponent</a></code>
                            <code>NgOptimizedImage</code>
                                <code><a href="../components/WizardHeaderComponent.html" target="_self" >WizardHeaderComponent</a></code>
                </td>
            </tr>




            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./checkout-wizard.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#api" >api</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#cart" >cart</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#currencySymbol" >currencySymbol</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#currentStep" >currentStep</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#errorModal" >errorModal</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#errors" >errors</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#fb" >fb</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#fingerprint" >fingerprint</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#form" >form</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#hasCommissions" >hasCommissions</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#hasItems" >hasItems</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#itemsCart" >itemsCart</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#loading" >loading</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#processCardPayments" >processCardPayments</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#progress" >progress</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#qrData" >qrData</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#quantitySelectedDebts" >quantitySelectedDebts</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#router" >router</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#showCloseTooltip" >showCloseTooltip</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#showDeleteTooltip" >showDeleteTooltip</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#showExceptionNIT" >showExceptionNIT</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#totalCommissions" >totalCommissions</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#totalGeneral" >totalGeneral</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#totalServices" >totalServices</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#totalSteps" >totalSteps</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addError" >addError</a>
                            </li>
                            <li>
                                <a href="#addMoreServices" >addMoreServices</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#canAdvance" >canAdvance</a>
                            </li>
                            <li>
                                <a href="#changeBillingDataMode" >changeBillingDataMode</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clearErrors" >clearErrors</a>
                            </li>
                            <li>
                                <a href="#exitCart" >exitCart</a>
                            </li>
                            <li>
                                <a href="#formatNumber" >formatNumber</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getOfficialDocDescriptionPlural" >getOfficialDocDescriptionPlural</a>
                            </li>
                            <li>
                                <a href="#goToHome" >goToHome</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handleApiError" >handleApiError</a>
                            </li>
                            <li>
                                <a href="#handleNextStep" >handleNextStep</a>
                            </li>
                            <li>
                                <a href="#handleProcessPaymentClick" >handleProcessPaymentClick</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#loadCart" >loadCart</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#nextStep" >nextStep</a>
                            </li>
                            <li>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                <a href="#prevStep" >prevStep</a>
                            </li>
                            <li>
                                <a href="#processPayment" >processPayment</a>
                            </li>
                            <li>
                                <a href="#removeItem" >removeItem</a>
                            </li>
                            <li>
                                <a href="#setExceptionNIT" >setExceptionNIT</a>
                            </li>
                            <li>
                                <a href="#setPaymentMethod" >setPaymentMethod</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#stepLabel" >stepLabel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#validateBillingShipping" >validateBillingShipping</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#validateCurrentStep" >validateCurrentStep</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#validateNIT" >validateNIT</a>
                            </li>
                        </ul>
                    </td>
                </tr>





                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#medioPago" >medioPago</a>
                                </li>
                                <li>
                                    <a href="#sinNombre" >sinNombre</a>
                                </li>
                                <li>
                                    <a href="#tipoDocumento" >tipoDocumento</a>
                                </li>
                                <li>
                                    <a href="#razonSocial" >razonSocial</a>
                                </li>
                                <li>
                                    <a href="#documentoSIN" >documentoSIN</a>
                                </li>
                                <li>
                                    <a href="#complementoSIN" >complementoSIN</a>
                                </li>
                                <li>
                                    <a href="#excepcionNIT" >excepcionNIT</a>
                                </li>
                                <li>
                                    <a href="#correoElectronico" >correoElectronico</a>
                                </li>
                                <li>
                                    <a href="#numeroTelefono" >numeroTelefono</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>






    <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addError"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>addError</b></span>
                        <a href="#addError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addError(message: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="522"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:522</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>message</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addMoreServices"></a>
                    <span class="name">
                        <span ><b>addMoreServices</b></span>
                        <a href="#addMoreServices"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addMoreServices()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="269"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:269</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="canAdvance"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>canAdvance</b></span>
                        <a href="#canAdvance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>canAdvance()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="228"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:228</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeBillingDataMode"></a>
                    <span class="name">
                        <span ><b>changeBillingDataMode</b></span>
                        <a href="#changeBillingDataMode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>changeBillingDataMode(unNamed: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="428"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:428</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>unNamed</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearErrors"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clearErrors</b></span>
                        <a href="#clearErrors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearErrors()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="526"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:526</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="exitCart"></a>
                    <span class="name">
                        <span ><b>exitCart</b></span>
                        <a href="#exitCart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>exitCart()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="512"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:512</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formatNumber"></a>
                    <span class="name">
                        <span ><b>formatNumber</b></span>
                        <a href="#formatNumber"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>formatNumber(value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, decimals: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="530"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:530</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>value</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>decimals</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>2</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getOfficialDocDescriptionPlural"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>getOfficialDocDescriptionPlural</b></span>
                        <a href="#getOfficialDocDescriptionPlural"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getOfficialDocDescriptionPlural()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="106"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:106</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Gets the plural form of officialDocDescription from the first cart item.
Defaults to &quot;facturas&quot; if no items in cart.
Simple pluralization by adding &quot;s&quot; to the end.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                <p>Plural form of document description (e.g., &quot;códigos de deudas&quot;, &quot;números de facturas&quot;)</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="goToHome"></a>
                    <span class="name">
                        <span ><b>goToHome</b></span>
                        <a href="#goToHome"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>goToHome()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="517"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:517</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleApiError"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>handleApiError</b></span>
                        <a href="#handleApiError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleApiError(error: unknown, fallbackMessage: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="548"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:548</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>error</td>
                                            <td>
                                                        <code>unknown</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>fallbackMessage</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleNextStep"></a>
                    <span class="name">
                        <span ><b>handleNextStep</b></span>
                        <a href="#handleNextStep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>handleNextStep()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="284"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:284</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleProcessPaymentClick"></a>
                    <span class="name">
                        <span ><b>handleProcessPaymentClick</b></span>
                        <a href="#handleProcessPaymentClick"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>handleProcessPaymentClick()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="274"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:274</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadCart"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>loadCart</b></span>
                        <a href="#loadCart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadCart()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="249"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:249</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="nextStep"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>nextStep</b></span>
                        <a href="#nextStep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>nextStep()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="298"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:298</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="245"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:245</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="prevStep"></a>
                    <span class="name">
                        <span ><b>prevStep</b></span>
                        <a href="#prevStep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>prevStep()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="306"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:306</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="processPayment"></a>
                    <span class="name">
                        <span ><b>processPayment</b></span>
                        <a href="#processPayment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>processPayment()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="450"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:450</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeItem"></a>
                    <span class="name">
                        <span ><b>removeItem</b></span>
                        <a href="#removeItem"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>removeItem(index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="260"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:260</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>index</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setExceptionNIT"></a>
                    <span class="name">
                        <span ><b>setExceptionNIT</b></span>
                        <a href="#setExceptionNIT"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setExceptionNIT(value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="543"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:543</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>value</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setPaymentMethod"></a>
                    <span class="name">
                        <span ><b>setPaymentMethod</b></span>
                        <a href="#setPaymentMethod"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setPaymentMethod(value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="538"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:538</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>value</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stepLabel"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>stepLabel</b></span>
                        <a href="#stepLabel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>stepLabel()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="174"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:174</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateBillingShipping"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>validateBillingShipping</b></span>
                        <a href="#validateBillingShipping"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateBillingShipping()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="347"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:347</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateCurrentStep"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>validateCurrentStep</b></span>
                        <a href="#validateCurrentStep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateCurrentStep()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="318"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:318</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateNIT"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>validateNIT</b></span>
                        <a href="#validateNIT"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateNIT()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="380"
                                    class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:380</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="api"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>api</b></span>
                        <a href="#api"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ApiService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="62" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:62</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cart"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>cart</b></span>
                        <a href="#cart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(CartService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="63" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:63</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currencySymbol"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>currencySymbol</b></span>
                        <a href="#currencySymbol"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    return this.cart.cartCurrency() ?? &#x27;Bs.&#x27;;
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="95" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:95</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Computed signal with the currency abbreviation from the cart.</p>
<p>Uses CartService.cartCurrency() to get the currency from the first cart item.
All items in cart are guaranteed to have the same currency due to validation.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentStep"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>currentStep</b></span>
                        <a href="#currentStep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(1)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="74" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:74</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errorModal"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>errorModal</b></span>
                        <a href="#errorModal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ErrorModalService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="66" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:66</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errors"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>errors</b></span>
                        <a href="#errors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="76" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:76</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fb"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>fb</b></span>
                        <a href="#fb"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(FormBuilder)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="67" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:67</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fingerprint"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>fingerprint</b></span>
                        <a href="#fingerprint"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(FingerprintService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:64</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="form"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>form</b></span>
                        <a href="#form"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>FormGroup</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.fb.group({
    medioPago: [&#x27;&#x27;],
    sinNombre: [&#x27;SI&#x27;],
    razonSocial: [&#x27;CONTROL TRIBUTARIO&#x27;],
    tipoDocumento: [5],
    documentoSIN: [&#x27;99002&#x27;],
    complementoSIN: [&#x27;&#x27;],
    excepcionNIT: [&#x27;false&#x27;],
    correoElectronico: [&#x27;&#x27;, [Validators.required, Validators.email]],
    numeroTelefono: [&#x27;&#x27;],
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="116" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:116</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasCommissions"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>hasCommissions</b></span>
                        <a href="#hasCommissions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.totalCommissions() &gt; 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="224" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:224</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasItems"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>hasItems</b></span>
                        <a href="#hasItems"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.itemsCart().length &gt; 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="206" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:206</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="itemsCart"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>itemsCart</b></span>
                        <a href="#itemsCart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;ItemCarrito[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="84" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:84</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loading"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>loading</b></span>
                        <a href="#loading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="75" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:75</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="processCardPayments"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>processCardPayments</b></span>
                        <a href="#processCardPayments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="70" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:70</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="progress"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>progress</b></span>
                        <a href="#progress"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; ((this.currentStep() - 1) / (this.totalSteps - 1)) * 100)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="172" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:172</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="qrData"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>qrData</b></span>
                        <a href="#qrData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;QRData&gt;({
    validity: &#x27;&#x27;,
    qrImage: &#x27;&#x27;,
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="166" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:166</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="quantitySelectedDebts"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>quantitySelectedDebts</b></span>
                        <a href="#quantitySelectedDebts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.itemsCart().reduce((sum, item) &#x3D;&gt; sum + item.deudasSeleccionadas.length, 0))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="226" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:226</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="router"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>router</b></span>
                        <a href="#router"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(Router)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="65" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:65</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showCloseTooltip"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>showCloseTooltip</b></span>
                        <a href="#showCloseTooltip"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:79</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showDeleteTooltip"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>showDeleteTooltip</b></span>
                        <a href="#showDeleteTooltip"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;number | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="80" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:80</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showExceptionNIT"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>showExceptionNIT</b></span>
                        <a href="#showExceptionNIT"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="81" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:81</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalCommissions"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>totalCommissions</b></span>
                        <a href="#totalCommissions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt;
    this.itemsCart()
      .reduce((sum, item) &#x3D;&gt; sum.plus(item.totalComision), new Decimal(0))
      .toDecimalPlaces(2)
      .toNumber(),
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="215" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:215</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalGeneral"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>totalGeneral</b></span>
                        <a href="#totalGeneral"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; new Decimal(this.totalServices()).plus(this.totalCommissions()).toDecimalPlaces(2).toNumber())</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="222" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:222</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalServices"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>totalServices</b></span>
                        <a href="#totalServices"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt;
    this.itemsCart()
      .reduce((sum, item) &#x3D;&gt; sum.plus(item.totalServicio), new Decimal(0))
      .toDecimalPlaces(2)
      .toNumber(),
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="208" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:208</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalSteps"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>totalSteps</b></span>
                        <a href="#totalSteps"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>5</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:71</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    <section data-compodoc="block-accessors">
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="medioPago"></a>
                        <span class="name"><b>medioPago</b><a href="#medioPago"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>medioPago()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="129" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:129</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="sinNombre"></a>
                        <span class="name"><b>sinNombre</b><a href="#sinNombre"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>sinNombre()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="133" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:133</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="tipoDocumento"></a>
                        <span class="name"><b>tipoDocumento</b><a href="#tipoDocumento"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>tipoDocumento()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="137" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:137</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="razonSocial"></a>
                        <span class="name"><b>razonSocial</b><a href="#razonSocial"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>razonSocial()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="141" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:141</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="documentoSIN"></a>
                        <span class="name"><b>documentoSIN</b><a href="#documentoSIN"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>documentoSIN()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="145" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:145</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="complementoSIN"></a>
                        <span class="name"><b>complementoSIN</b><a href="#complementoSIN"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>complementoSIN()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="149" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:149</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="excepcionNIT"></a>
                        <span class="name"><b>excepcionNIT</b><a href="#excepcionNIT"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>excepcionNIT()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="153" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:153</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="correoElectronico"></a>
                        <span class="name"><b>correoElectronico</b><a href="#correoElectronico"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>correoElectronico()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="157" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:157</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="numeroTelefono"></a>
                        <span class="name"><b>numeroTelefono</b><a href="#numeroTelefono"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>numeroTelefono()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="161" class="link-to-prism">src/app/features/cart/pages/checkout-wizard/checkout-wizard.ts:161</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
</section>
</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { NgOptimizedImage } from &#x27;@angular/common&#x27;;
import { ChangeDetectionStrategy, Component, OnInit, inject, signal, computed } from &#x27;@angular/core&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from &#x27;@angular/forms&#x27;;
import { from, EMPTY } from &#x27;rxjs&#x27;;
import { switchMap, tap, catchError, finalize } from &#x27;rxjs/operators&#x27;;
import { ApiService, CartService, FingerprintService, ErrorModalService } from &#x27;@core/services&#x27;;

import Decimal from &#x27;decimal.js-light&#x27;;

import { ItemCarrito } from &#x27;@models/index&#x27;;
import { WizardHeaderComponent } from &#x27;@shared/components/wizard-header/wizard-header&#x27;;
import { LoadingComponent } from &#x27;@shared/components/loading/loading&#x27;;
import { QrDisplayComponent } from &#x27;@shared/components/qr-display/qr-display&#x27;;

/**
 * QR code data for payment display.
 *
 * @internal
 */
interface QRData {
  validity: string;
  qrImage: string;
}

/**
 * Multi-step checkout wizard for payment processing.
 *
 * Handles the following workflow:
 * 1. **Step 1**: Cart review (view items, remove items, add more)
 * 2. **Step 2**: Payment method selection (QR Simple / QR con Comisión)
 * 3. **Step 3**: Billing information form (NIT validation, email, phone)
 * 4. **Step 4**: Payment processing (generate QR code via API)
 * 5. **Step 5**: QR code display (download, restart)
 *
 * @remarks
 * **Key features:**
 * - Integrates with CartService for cart state
 * - Uses FingerprintService for browser identification (fraud prevention)
 * - Validates NIT via API (special NITs: 99001, 99002, 99003)
 * - Generates QR codes for bank app payment
 * - Uses Decimal.js for precise currency calculations
 * - Handles API errors via ErrorModalService
 *
 * **Payment methods:**
 * - **QR Simple**: No commission, no billing required (uses default &quot;Control Tributario&quot;)
 * - **QR con Comisión**: Includes commission, requires valid NIT and billing data
 *
 * @selector app-checkout-wizard
 *
 * @see {@link CartService}
 * @see {@link FingerprintService}
 * @see {@link ApiService}
 */
@Component({
  selector: &#x27;app-checkout-wizard&#x27;,
  changeDetection: ChangeDetectionStrategy.OnPush,
  templateUrl: &#x27;./checkout-wizard.html&#x27;,
  imports: [ReactiveFormsModule, LoadingComponent, QrDisplayComponent, NgOptimizedImage, WizardHeaderComponent],
})
export class CheckoutWizardComponent implements OnInit {
  private readonly api &#x3D; inject(ApiService);
  private readonly cart &#x3D; inject(CartService);
  private readonly fingerprint &#x3D; inject(FingerprintService);
  private readonly router &#x3D; inject(Router);
  private readonly errorModal &#x3D; inject(ErrorModalService);
  private readonly fb &#x3D; inject(FormBuilder);

  // Configuration
  protected readonly processCardPayments &#x3D; true;
  protected readonly totalSteps &#x3D; 5;

  // Wizard status
  protected readonly currentStep &#x3D; signal(1);
  protected readonly loading &#x3D; signal(false);
  protected readonly errors &#x3D; signal&lt;string[]&gt;([]);

  // UI State
  protected readonly showCloseTooltip &#x3D; signal(false);
  protected readonly showDeleteTooltip &#x3D; signal&lt;number | null&gt;(null);
  protected readonly showExceptionNIT &#x3D; signal(false);

  // Items in cart
  protected readonly itemsCart &#x3D; signal&lt;ItemCarrito[]&gt;([]);

  /**
   * Computed signal with the currency abbreviation from the cart.
   *
   * @returns Currency abbreviation (e.g., &quot;Bs.&quot;, &quot;USD&quot;), defaults to &quot;Bs.&quot; if cart is empty
   *
   * @remarks
   * Uses CartService.cartCurrency() to get the currency from the first cart item.
   * All items in cart are guaranteed to have the same currency due to validation.
   */
  protected readonly currencySymbol &#x3D; computed(() &#x3D;&gt; {
    return this.cart.cartCurrency() ?? &#x27;Bs.&#x27;;
  });

  /**
   * Gets the plural form of officialDocDescription from the first cart item.
   * Defaults to &quot;facturas&quot; if no items in cart.
   * Simple pluralization by adding &quot;s&quot; to the end.
   *
   * @returns Plural form of document description (e.g., &quot;códigos de deudas&quot;, &quot;números de facturas&quot;)
   */
  protected getOfficialDocDescriptionPlural(): string {
    const firstItem &#x3D; this.itemsCart()[0];
    if (!firstItem?.descripcionDocOficial) {
      return &#x27;facturas&#x27;;
    }
    // Simple pluralization: add &quot;s&quot; at the end
    return firstItem.descripcionDocOficial.toLowerCase() + &#x27;s&#x27;;
  }

  // Reactive Form
  protected readonly form: FormGroup &#x3D; this.fb.group({
    medioPago: [&#x27;&#x27;],
    sinNombre: [&#x27;SI&#x27;],
    razonSocial: [&#x27;CONTROL TRIBUTARIO&#x27;],
    tipoDocumento: [5],
    documentoSIN: [&#x27;99002&#x27;],
    complementoSIN: [&#x27;&#x27;],
    excepcionNIT: [&#x27;false&#x27;],
    correoElectronico: [&#x27;&#x27;, [Validators.required, Validators.email]],
    numeroTelefono: [&#x27;&#x27;],
  });

  // Getters for form values
  protected get medioPago(): string {
    return this.form.get(&#x27;medioPago&#x27;)?.value ?? &#x27;&#x27;;
  }

  protected get sinNombre(): string {
    return this.form.get(&#x27;sinNombre&#x27;)?.value ?? &#x27;SI&#x27;;
  }

  protected get tipoDocumento(): number {
    return this.form.get(&#x27;tipoDocumento&#x27;)?.value ?? 5;
  }

  protected get razonSocial(): string {
    return this.form.get(&#x27;razonSocial&#x27;)?.value ?? &#x27;&#x27;;
  }

  protected get documentoSIN(): string {
    return this.form.get(&#x27;documentoSIN&#x27;)?.value ?? &#x27;&#x27;;
  }

  protected get complementoSIN(): string {
    return this.form.get(&#x27;complementoSIN&#x27;)?.value ?? &#x27;&#x27;;
  }

  protected get excepcionNIT(): string {
    return this.form.get(&#x27;excepcionNIT&#x27;)?.value ?? &#x27;false&#x27;;
  }

  protected get correoElectronico(): string {
    return this.form.get(&#x27;correoElectronico&#x27;)?.value ?? &#x27;&#x27;;
  }

  protected get numeroTelefono(): string {
    return this.form.get(&#x27;numeroTelefono&#x27;)?.value ?? &#x27;&#x27;;
  }

  // QR Data
  protected readonly qrData &#x3D; signal&lt;QRData&gt;({
    validity: &#x27;&#x27;,
    qrImage: &#x27;&#x27;,
  });

  // Computed
  protected readonly progress &#x3D; computed(() &#x3D;&gt; ((this.currentStep() - 1) / (this.totalSteps - 1)) * 100);

  protected stepLabel(): string {
    const medioPago &#x3D; this.form.get(&#x27;medioPago&#x27;)?.value;
    let label &#x3D; &#x27;&#x27;;

    switch (this.currentStep()) {
      case 1:
        label &#x3D; &#x27;CARRITO DE COMPRAS&#x27;;
        break;
      case 2:
        label &#x3D; &#x27;METODO DE PAGO&#x27;;
        break;
      case 3:
        label &#x3D; &#x27;INFORMACION&#x27;;
        break;
      case 4:
        label &#x3D; &#x27;RESUMEN FINAL&#x27;;
        break;
      case 5:
        label &#x3D; &#x27;PAGO&#x27;;
        break;
      default:
        label &#x3D; &#x27;PROCESANDO&#x27;;
    }

    if (medioPago &#x3D;&#x3D;&#x3D; &#x27;Q&#x27;) {
      return &#x60;${label} - QR&#x60;;
    } else if (medioPago &#x3D;&#x3D;&#x3D; &#x27;T&#x27;) {
      return &#x60;${label} - Tarjeta&#x60;;
    }
    return label;
  }

  protected readonly hasItems &#x3D; computed(() &#x3D;&gt; this.itemsCart().length &gt; 0);

  protected readonly totalServices &#x3D; computed(() &#x3D;&gt;
    this.itemsCart()
      .reduce((sum, item) &#x3D;&gt; sum.plus(item.totalServicio), new Decimal(0))
      .toDecimalPlaces(2)
      .toNumber(),
  );

  protected readonly totalCommissions &#x3D; computed(() &#x3D;&gt;
    this.itemsCart()
      .reduce((sum, item) &#x3D;&gt; sum.plus(item.totalComision), new Decimal(0))
      .toDecimalPlaces(2)
      .toNumber(),
  );

  protected readonly totalGeneral &#x3D; computed(() &#x3D;&gt; new Decimal(this.totalServices()).plus(this.totalCommissions()).toDecimalPlaces(2).toNumber());

  protected readonly hasCommissions &#x3D; computed(() &#x3D;&gt; this.totalCommissions() &gt; 0);

  protected readonly quantitySelectedDebts &#x3D; computed(() &#x3D;&gt; this.itemsCart().reduce((sum, item) &#x3D;&gt; sum + item.deudasSeleccionadas.length, 0));

  protected canAdvance(): boolean {
    const step &#x3D; this.currentStep();

    switch (step) {
      case 1:
        return this.hasItems();
      case 2:
        return this.form.get(&#x27;medioPago&#x27;)?.value !&#x3D;&#x3D; &#x27;&#x27;;
      case 3:
        return this.form.get(&#x27;correoElectronico&#x27;)?.value?.trim() !&#x3D;&#x3D; &#x27;&#x27;;
      case 4:
        return true;
      default:
        return false;
    }
  }

  ngOnInit(): void {
    this.loadCart();
  }

  private loadCart(): void {
    const items &#x3D; this.cart.items();
    this.itemsCart.set([...items]);

    // Pre-fill email from first item if available
    if (items.length &gt; 0 &amp;&amp; items[0].datosFacturacion?.correoElectronico) {
      this.form.patchValue({ correoElectronico: items[0].datosFacturacion.correoElectronico });
    }
  }

  // Remove item from cart
  removeItem(index: number): void {
    const items &#x3D; this.itemsCart();
    if (index &lt; 0 || index &gt;&#x3D; items.length) return;

    this.cart.removeItem(index);
    this.itemsCart.set([...this.cart.items()]);
  }

  // Add more services
  addMoreServices(): void {
    this.router.navigate([&#x27;/&#x27;]);
  }

  // Navigation - Continue payment from Step 1
  handleProcessPaymentClick(): void {
    if (this.processCardPayments) {
      this.nextStep();
    } else {
      this.form.patchValue({ medioPago: &#x27;Q&#x27; });
      this.nextStep();
    }
  }

  // Navigation - Next step
  handleNextStep(): void {
    // Validate current step
    const isValid &#x3D; this.validateCurrentStep();
    if (!isValid) return;

    // If we are in step 3 and there are commissions, validate NIT
    if (this.currentStep() &#x3D;&#x3D;&#x3D; 3 &amp;&amp; this.hasCommissions() &amp;&amp; this.form.get(&#x27;tipoDocumento&#x27;)?.value &#x3D;&#x3D;&#x3D; 5) {
      this.validateNIT();
      return; // validateNIT will call nextStep() if valid
    }

    this.nextStep();
  }

  private nextStep(): void {
    this.clearErrors();
    if (this.currentStep() &lt; this.totalSteps) {
      this.currentStep.update((s) &#x3D;&gt; s + 1);
      window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
    }
  }

  prevStep(): void {
    // Do not allow back navigation from step 5 (QR code generated)
    if (this.currentStep() &#x3D;&#x3D;&#x3D; 5) return;

    this.clearErrors();
    if (this.currentStep() &gt; 1) {
      this.currentStep.update((s) &#x3D;&gt; s - 1);
      window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
    }
  }

  // Validations
  private validateCurrentStep(): boolean {
    this.clearErrors();

    switch (this.currentStep()) {
      case 1:
        if (!this.hasItems()) {
          this.addError(&#x27;El carrito esta vacio&#x27;);
          return false;
        }
        return true;

      case 2:
        if (!this.form.get(&#x27;medioPago&#x27;)?.value) {
          this.addError(&#x27;Debe seleccionar un metodo de pago&#x27;);
          return false;
        }
        return true;

      case 3:
        return this.validateBillingShipping();

      case 4:
        return true;

      default:
        return true;
    }
  }

  private validateBillingShipping(): boolean {
    const email &#x3D; this.form.get(&#x27;correoElectronico&#x27;)?.value || &#x27;&#x27;;
    const companyName &#x3D; this.form.get(&#x27;razonSocial&#x27;)?.value || &#x27;&#x27;;
    const documentSIN &#x3D; this.form.get(&#x27;documentoSIN&#x27;)?.value || &#x27;&#x27;;

    // Validate email address
    if (!email.trim()) {
      this.addError(&#x27;El correo electronico es obligatorio&#x27;);
      return false;
    }

    const emailRegex &#x3D; /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      this.addError(&#x27;El correo electronico no tiene un formato valido&#x27;);
      return false;
    }

    // If there are fees, validate billing information.
    if (this.hasCommissions()) {
      if (!companyName.trim()) {
        this.addError(&#x27;La Razon Social es obligatoria&#x27;);
        return false;
      }

      if (!documentSIN.trim()) {
        this.addError(&#x27;El numero de documento es obligatorio&#x27;);
        return false;
      }
    }

    return true;
  }

  private validateNIT(): void {
    const documentType &#x3D; this.form.get(&#x27;tipoDocumento&#x27;)?.value;
    const documentSIN &#x3D; this.form.get(&#x27;documentoSIN&#x27;)?.value || &#x27;&#x27;;
    const exceptionNIT &#x3D; this.form.get(&#x27;excepcionNIT&#x27;)?.value;

    // Skip if it&#x27;s not a NIT - continue to the next step
    if (documentType !&#x3D;&#x3D; 5) {
      this.nextStep();
      return;
    }

    // Allow special NITs (Tax Control)
    if ([&#x27;99001&#x27;, &#x27;99002&#x27;, &#x27;99003&#x27;].includes(documentSIN)) {
      this.nextStep();
      return;
    }

    // If I already accept the exception
    if (exceptionNIT &#x3D;&#x3D;&#x3D; &#x27;true&#x27;) {
      this.nextStep();
      return;
    }

    this.loading.set(true);

    this.api.verifyNIT(documentSIN).subscribe({
      next: (response) &#x3D;&gt; {
        if (response?.success &amp;&amp; response.data?.estadoDocumento &#x3D;&#x3D;&#x3D; &#x27;true&#x27;) {
          this.loading.set(false);
          this.nextStep();
        } else {
          this.showExceptionNIT.set(true);
          this.addError(&#x27;NIT invalido. Confirme si se realiza Excepcion de registro con ese NIT&#x27;);
          this.loading.set(false);
          // If I already accepted the exception after the error, allow it to continue.
          if (this.form.get(&#x27;excepcionNIT&#x27;)?.value &#x3D;&#x3D;&#x3D; &#x27;true&#x27;) {
            this.nextStep();
          }
        }
      },
      error: (error: unknown) &#x3D;&gt; {
        this.handleApiError(error, &#x27;Error al validar NIT&#x27;);
        this.loading.set(false);
      },
    });
  }

  // Change unnamed mode
  changeBillingDataMode(unNamed: boolean): void {
    if (unNamed) {
      this.form.patchValue({
        sinNombre: &#x27;SI&#x27;,
        razonSocial: &#x27;CONTROL TRIBUTARIO&#x27;,
        tipoDocumento: 5,
        documentoSIN: &#x27;99002&#x27;,
        complementoSIN: &#x27;&#x27;,
        excepcionNIT: &#x27;false&#x27;,
      });
      this.showExceptionNIT.set(false);
    } else {
      this.form.patchValue({
        sinNombre: &#x27;NO&#x27;,
        razonSocial: &#x27;&#x27;,
        documentoSIN: &#x27;&#x27;,
        complementoSIN: &#x27;&#x27;,
      });
    }
  }

  // Process payment
  processPayment(): void {
    if (this.loading()) return;

    const formValue &#x3D; this.form.getRawValue();

    // Final validations
    if (!formValue.correoElectronico?.trim()) {
      this.addError(&#x27;Debe ingresar un correo electronico&#x27;);
      return;
    }

    if (formValue.medioPago !&#x3D;&#x3D; &#x27;Q&#x27;) {
      this.addError(&#x27;Metodo de pago no implementado&#x27;);
      return;
    }

    this.loading.set(true);

    // Chain of Observables without nesting
    from(this.fingerprint.generate())
      .pipe(
        switchMap((browserFingerprint) &#x3D;&gt; {
          const paymentData &#x3D; {
            medioPago: formValue.medioPago,
            itemsCarrito: this.itemsCart(),
            totalServicios: this.totalServices(),
            totalComisiones: this.totalCommissions(),
            totalGeneral: this.totalGeneral(),
            tipoDocumento: formValue.tipoDocumento,
            documentoSIN: formValue.documentoSIN,
            complementoSIN: formValue.complementoSIN,
            excepcionNIT: formValue.excepcionNIT &#x3D;&#x3D;&#x3D; &#x27;true&#x27; ? &#x27;1&#x27; : &#x27;0&#x27;,
            razonSocial: formValue.razonSocial,
            correoElectronico: formValue.correoElectronico,
            numeroTelefono: formValue.numeroTelefono || &#x27;0&#x27;,
            browserFingerprint,
          };
          return this.api.processPaymentCart(paymentData);
        }),
        tap((response) &#x3D;&gt; {
          if (response?.success &amp;&amp; response.data) {
            this.qrData.set({
              validity: response.data.validity,
              qrImage: response.data.qrImage,
            });
            this.cart.clearCart();
            this.currentStep.set(5);
            window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
          } else {
            this.addError(&#x27;Error al procesar el pago&#x27;);
          }
        }),
        catchError((error: unknown) &#x3D;&gt; {
          this.handleApiError(error, &#x27;Error al procesar el pago. Intente nuevamente.&#x27;);
          return EMPTY;
        }),
        finalize(() &#x3D;&gt; this.loading.set(false)),
      )
      .subscribe();
  }

  // Exit cart
  exitCart(): void {
    this.router.navigate([&#x27;/&#x27;]);
  }

  // Go to home
  goToHome(): void {
    this.router.navigate([&#x27;/&#x27;]);
  }

  // Helpers
  private addError(message: string): void {
    this.errors.update((errs) &#x3D;&gt; [...errs, message]);
  }

  private clearErrors(): void {
    this.errors.set([]);
  }

  formatNumber(value: number, decimals: number &#x3D; 2): string {
    return value.toLocaleString(&#x27;es-BO&#x27;, {
      minimumFractionDigits: decimals,
      maximumFractionDigits: decimals,
    });
  }

  // Template helper for payment method selection (click handler)
  setPaymentMethod(value: string): void {
    this.form.patchValue({ medioPago: value });
  }

  // Template helper for NIT exception (radio button change)
  setExceptionNIT(value: string): void {
    this.form.patchValue({ excepcionNIT: value });
  }

  // API error handling
  private handleApiError(error: unknown, fallbackMessage: string): void {
    if (!this.errorModal.handleHttpError(error)) {
      this.addError(fallbackMessage);
    }
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">&lt;main class&#x3D;&quot;dark:bg-gray-900&quot;&gt;
  &lt;div class&#x3D;&quot;mx-auto max-w-7xl px-4 sm:px-6 lg:px-8&quot;&gt;
    &lt;!-- Loading overlay --&gt;
    @if (loading()) {
      &lt;div class&#x3D;&quot;fixed inset-0 z-50 flex items-center justify-center bg-black/50&quot;&gt;
        &lt;app-loading size&#x3D;&quot;lg&quot; text&#x3D;&quot;Procesando...&quot;&gt;&lt;/app-loading&gt;
      &lt;/div&gt;
    }

    &lt;!-- Cart wizard --&gt;
    &lt;div class&#x3D;&quot;relative mx-auto max-w-250 py-5&quot;&gt;
      &lt;!-- Page title --&gt;
      &lt;app-wizard-header cardTitle&#x3D;&quot;CARRITO&quot; (buttonClose)&#x3D;&quot;goToHome()&quot; /&gt;

      &lt;!-- Wizard container --&gt;
      &lt;div class&#x3D;&quot;relative overflow-visible rounded-lg bg-gray-100 p-4 shadow-md sm:p-8 dark:bg-gray-800&quot;&gt;
        &lt;!-- Badge step number --&gt;
        @if (hasItems() || currentStep() &#x3D;&#x3D;&#x3D; 5) {
          &lt;div class&#x3D;&quot;absolute -top-2 right-4 z-10 flex h-20 w-20 items-center justify-center rounded bg-blue-500 text-5xl font-bold text-white shadow-lg dark:bg-blue-600&quot;&gt;
            {{ currentStep() }}
          &lt;/div&gt;
        }

        &lt;!-- Progress bar --&gt;
        @if (hasItems() || currentStep() &#x3D;&#x3D;&#x3D; 5) {
          &lt;div class&#x3D;&quot;mb-8&quot;&gt;
            &lt;div class&#x3D;&quot;mb-2 flex justify-between text-sm text-gray-800 dark:text-gray-200&quot;&gt;
              &lt;span&gt;{{ stepLabel() }}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class&#x3D;&quot;relative h-2 w-full overflow-hidden rounded-full bg-gray-300 dark:bg-gray-600&quot;&gt;
              &lt;div class&#x3D;&quot;relative h-full rounded-full bg-linear-to-r from-blue-500 to-blue-600 transition-all duration-400 ease-in-out&quot; [style.width.%]&#x3D;&quot;progress()&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- Error alerts --&gt;
        @if (errors().length &gt; 0) {
          &lt;div class&#x3D;&quot;mb-4 flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-red-500 bg-red-100 px-4 py-4 text-red-800 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200&quot;&gt;
            &lt;div class&#x3D;&quot;flex-1&quot;&gt;
              &lt;div class&#x3D;&quot;mb-1 font-semibold&quot;&gt;
                {{ errors().length &gt; 1 ? &#x27;Errores de validacion:&#x27; : &#x27;Error de validacion:&#x27; }}
              &lt;/div&gt;
              &lt;ul class&#x3D;&quot;mt-2 list-inside list-disc text-xl&quot;&gt;
                @for (error of errors(); track error) {
                  &lt;li&gt;{{ error }}&lt;/li&gt;
                }
              &lt;/ul&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- STEP 1: Cart review --&gt;
        @if (currentStep() &#x3D;&#x3D;&#x3D; 1) {
          &lt;div&gt;
            &lt;!-- Empty cart --&gt;
            @if (!hasItems()) {
              &lt;div class&#x3D;&quot;pt-12 pb-3 text-center&quot;&gt;
                &lt;svg class&#x3D;&quot;mx-auto h-12 w-12 text-gray-400&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z&quot; /&gt;
                &lt;/svg&gt;
                &lt;h3 class&#x3D;&quot;mt-2 text-lg font-medium text-gray-900 dark:text-white&quot;&gt;El carrito esta vacio&lt;/h3&gt;
                &lt;p class&#x3D;&quot;mt-1 text-sm text-gray-500 dark:text-gray-400&quot;&gt;Agregue servicios desde la pagina principal&lt;/p&gt;
              &lt;/div&gt;
            }

            &lt;!-- Items in cart --&gt;
            @if (hasItems()) {
              &lt;div class&#x3D;&quot;space-y-4&quot;&gt;
                &lt;!-- Mobile view: Cards (&lt; sm breakpoint) --&gt;
                &lt;div class&#x3D;&quot;sm:hidden&quot;&gt;
                  @for (item of itemsCart(); track item.fechaAdicion; let i &#x3D; $index) {
                    &lt;div class&#x3D;&quot;mb-4 rounded-lg border border-gray-200 dark:border-gray-700&quot;&gt;
                      &lt;!-- Service Header --&gt;
                      &lt;div class&#x3D;&quot;bg-gray-200 px-4 py-3 dark:bg-gray-700&quot;&gt;
                        &lt;div class&#x3D;&quot;flex items-center justify-between&quot;&gt;
                          &lt;div&gt;
                            &lt;h3 class&#x3D;&quot;text-lg font-bold text-gray-900 dark:text-white&quot;&gt;
                              {{ item.nombreServicio }}
                            &lt;/h3&gt;
                            &lt;p class&#x3D;&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})&lt;/p&gt;
                          &lt;/div&gt;

                          &lt;!-- Delete button (mobile - sin tooltip) --&gt;
                          &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer text-red-600 hover:text-red-800 dark:text-red-400&quot; (click)&#x3D;&quot;removeItem(i)&quot; [attr.aria-label]&#x3D;&quot;&#x27;Eliminar pago de &#x27; + item.nombreServicio&quot;&gt;
                            &lt;svg class&#x3D;&quot;h-6 w-6&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                              &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16&quot; /&gt;
                            &lt;/svg&gt;
                          &lt;/button&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      &lt;!-- Debt Cards (nested loop) --&gt;
                      &lt;div class&#x3D;&quot;space-y-2 p-4&quot;&gt;
                        @for (deuda of item.deudasSeleccionadas; track deuda.documentoPago) {
                          &lt;div class&#x3D;&quot;rounded-md border border-gray-300 bg-white p-3 dark:border-gray-600 dark:bg-gray-800&quot;&gt;
                            &lt;!-- Period (prominent) --&gt;
                            &lt;div class&#x3D;&quot;mb-2 text-base font-bold text-gray-900 dark:text-gray-100&quot;&gt;
                              {{ deuda.periodoCobro }}
                            &lt;/div&gt;

                            &lt;!-- Document --&gt;
                            &lt;div class&#x3D;&quot;flex justify-between text-sm&quot;&gt;
                              &lt;span class&#x3D;&quot;text-gray-600 dark:text-gray-400&quot;&gt;{{ item.descripcionDocOficial }}:&lt;/span&gt;
                              &lt;span class&#x3D;&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                                {{ deuda.documentoPago }}
                              &lt;/span&gt;
                            &lt;/div&gt;

                            &lt;!-- Amount --&gt;
                            &lt;div class&#x3D;&quot;flex justify-between text-base&quot;&gt;
                              &lt;span class&#x3D;&quot;font-semibold text-gray-700 dark:text-gray-300&quot;&gt; Deuda {{ currencySymbol() }}: &lt;/span&gt;
                              &lt;span class&#x3D;&quot;font-bold text-gray-900 dark:text-gray-100&quot;&gt;
                                {{ formatNumber(deuda.periodoServicio) }}
                              &lt;/span&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        }
                      &lt;/div&gt;

                      &lt;!-- Commission Row (if applicable) --&gt;
                      @if (item.totalComision &gt; 0) {
                        &lt;div class&#x3D;&quot;border-t border-gray-300 bg-yellow-50 px-4 py-3 dark:border-gray-600 dark:bg-yellow-900/20&quot;&gt;
                          &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                            &lt;span class&#x3D;&quot;text-sm font-semibold text-gray-700 dark:text-gray-300&quot;&gt; Comision facturable &lt;/span&gt;
                            &lt;span class&#x3D;&quot;text-base font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
                              {{ formatNumber(item.totalComision) }}
                            &lt;/span&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      }

                      &lt;!-- Service Subtotal --&gt;
                      &lt;div class&#x3D;&quot;border-t-2 border-gray-400 bg-gray-200 px-4 py-3 dark:border-gray-500 dark:bg-gray-700&quot;&gt;
                        &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                          &lt;span class&#x3D;&quot;text-base font-bold text-gray-900 dark:text-gray-100&quot;&gt; Subtotal {{ currencySymbol() }} &lt;/span&gt;
                          &lt;span class&#x3D;&quot;text-lg font-bold text-blue-600 dark:text-blue-400&quot;&gt;
                            {{ formatNumber(item.totalServicio + item.totalComision) }}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  }

                  &lt;!-- Grand Total (mobile) --&gt;
                  &lt;div class&#x3D;&quot;mt-2 mb-6 text-right&quot;&gt;
                    &lt;div class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-blue-500 px-4 py-3 text-3xl font-bold text-white dark:border-blue-700 dark:bg-blue-600&quot;&gt;Total {{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;!-- Desktop view: Table (&gt;&#x3D; sm breakpoint) --&gt;
                &lt;div class&#x3D;&quot;hidden sm:block&quot;&gt;
                  @for (item of itemsCart(); track item.fechaAdicion; let i &#x3D; $index) {
                    &lt;div class&#x3D;&quot;mb-4 rounded-lg border border-gray-200 p-4 dark:border-gray-700&quot;&gt;
                      &lt;!-- Service Header --&gt;
                      &lt;div class&#x3D;&quot;flex items-center justify-between&quot;&gt;
                        &lt;div class&#x3D;&quot;flex items-center gap-3&quot;&gt;
                          &lt;div&gt;
                            &lt;h3 class&#x3D;&quot;text-lg font-bold text-gray-900 dark:text-white&quot;&gt;
                              {{ item.nombreServicio }}
                            &lt;/h3&gt;
                            &lt;p class&#x3D;&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})&lt;/p&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;!-- Delete button with tooltip --&gt;
                        &lt;div class&#x3D;&quot;relative&quot;&gt;
                          &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300&quot; (click)&#x3D;&quot;removeItem(i)&quot; (mouseenter)&#x3D;&quot;showDeleteTooltip.set(i)&quot; (mouseleave)&#x3D;&quot;showDeleteTooltip.set(null)&quot;&gt;
                            &lt;svg class&#x3D;&quot;h-6 w-6&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                              &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16&quot; /&gt;
                            &lt;/svg&gt;
                          &lt;/button&gt;

                          @if (showDeleteTooltip() &#x3D;&#x3D;&#x3D; i) {
                            &lt;div class&#x3D;&quot;pointer-events-none absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700&quot;&gt;
                              &lt;span&gt;Eliminar pago&lt;/span&gt;
                              &lt;div class&#x3D;&quot;absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700&quot;&gt;&lt;/div&gt;
                            &lt;/div&gt;
                          }
                        &lt;/div&gt;
                      &lt;/div&gt;

                      &lt;!-- Debt table --&gt;
                      &lt;div class&#x3D;&quot;mt-4&quot;&gt;
                        &lt;div class&#x3D;&quot;mt-4 overflow-x-auto rounded-md border border-gray-300 dark:border-gray-600&quot;&gt;
                          &lt;table class&#x3D;&quot;w-full border-collapse text-lg dark:text-gray-200&quot;&gt;
                            &lt;thead class&#x3D;&quot;bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200&quot;&gt;
                              &lt;tr&gt;
                                &lt;th class&#x3D;&quot;px-3 py-3 text-left text-base font-semibold tracking-wide uppercase&quot;&gt;Periodo&lt;/th&gt;
                                &lt;th class&#x3D;&quot;px-3 py-3 text-left text-base font-semibold tracking-wide uppercase&quot;&gt;{{ item.descripcionDocOficial }}&lt;/th&gt;
                                &lt;th class&#x3D;&quot;px-3 py-3 text-right text-base font-semibold tracking-wide uppercase&quot;&gt;Deuda {{ currencySymbol() }}&lt;/th&gt;
                              &lt;/tr&gt;
                            &lt;/thead&gt;
                            &lt;tbody&gt;
                              @for (deuda of item.deudasSeleccionadas; track deuda.documentoPago) {
                                &lt;tr class&#x3D;&quot;border-b border-gray-200 dark:border-gray-700&quot;&gt;
                                  &lt;td class&#x3D;&quot;px-3 text-left&quot;&gt;{{ deuda.periodoCobro }}&lt;/td&gt;
                                  &lt;td class&#x3D;&quot;px-3 text-left&quot;&gt;{{ deuda.documentoPago }}&lt;/td&gt;
                                  &lt;td class&#x3D;&quot;px-3 text-right&quot;&gt;
                                    {{ formatNumber(deuda.periodoServicio) }}
                                  &lt;/td&gt;
                                &lt;/tr&gt;
                              }
                            &lt;/tbody&gt;
                            &lt;tfoot class&#x3D;&quot;border-b border-gray-200 dark:border-gray-700&quot;&gt;
                              @if (item.totalComision &gt; 0) {
                                &lt;tr class&#x3D;&quot;bg-yellow-50 dark:bg-yellow-900/20&quot;&gt;
                                  &lt;td colspan&#x3D;&quot;2&quot; class&#x3D;&quot;border-b border-gray-300 px-3 py-3 dark:border-gray-600 dark:text-gray-200&quot;&gt;Comision facturable a cobrar&lt;/td&gt;
                                  &lt;td class&#x3D;&quot;border-b border-gray-300 px-3 py-3 text-right dark:border-gray-600 dark:text-gray-200&quot;&gt;
                                    {{ formatNumber(item.totalComision) }}
                                  &lt;/td&gt;
                                &lt;/tr&gt;
                              }
                              &lt;tr class&#x3D;&quot;bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200&quot;&gt;
                                &lt;td colspan&#x3D;&quot;3&quot; class&#x3D;&quot;border-t-2 border-gray-400 px-3 py-3 text-right font-semibold dark:border-gray-500 dark:text-gray-200&quot;&gt;{{ currencySymbol() }} {{ formatNumber(item.totalServicio + item.totalComision) }}&lt;/td&gt;
                              &lt;/tr&gt;
                            &lt;/tfoot&gt;
                          &lt;/table&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  }

                  &lt;!-- Total amount collected --&gt;
                  &lt;div class&#x3D;&quot;mt-2 mb-6 text-right&quot;&gt;
                    &lt;div class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-blue-500 px-4 py-3 text-3xl font-bold text-white transition-all dark:border-blue-700 dark:bg-blue-600&quot;&gt;Total {{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            }

            &lt;!-- Navigation buttons --&gt;
            &lt;div class&#x3D;&quot;mt-8 flex&quot; [class.justify-center]&#x3D;&quot;!hasItems()&quot; [class.justify-between]&#x3D;&quot;hasItems()&quot;&gt;
              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg&quot; (click)&#x3D;&quot;addMoreServices()&quot;&gt;
                &lt;svg class&#x3D;&quot;h-5 w-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M12 4v16m8-8H4&quot; /&gt;
                &lt;/svg&gt;
                &lt;span&gt;Agregar servicios&lt;/span&gt;
              &lt;/button&gt;

              @if (hasItems()) {
                &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50&quot; [disabled]&#x3D;&quot;loading()&quot; (click)&#x3D;&quot;handleProcessPaymentClick()&quot;&gt;
                  &lt;span class&#x3D;&quot;sm:hidden&quot;&gt;Pagar&lt;/span&gt;
                  &lt;span class&#x3D;&quot;hidden sm:inline&quot;&gt;Continuar el pago&lt;/span&gt;
                  &lt;svg class&#x3D;&quot;h-5 w-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                    &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M9 5l7 7-7 7&quot; /&gt;
                  &lt;/svg&gt;
                &lt;/button&gt;
              }
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- STEP 2: Payment method --&gt;
        @if (currentStep() &#x3D;&#x3D;&#x3D; 2) {
          &lt;div&gt;
            &lt;div&gt;
              &lt;p class&#x3D;&quot;mt-2 text-sm text-gray-600 dark:text-gray-400&quot;&gt;Seleccionar metodo de pago&lt;/p&gt;
            &lt;/div&gt;

            &lt;div class&#x3D;&quot;min-h-25&quot;&gt;
              &lt;div class&#x3D;&quot;grid grid-cols-1 gap-6 pt-2 sm:grid-cols-2&quot;&gt;
                &lt;!-- QR option --&gt;
                @let esQR &#x3D; medioPago &#x3D;&#x3D;&#x3D; &#x27;Q&#x27;;
                &lt;div class&#x3D;&quot;relative cursor-pointer rounded-lg border-2 border-gray-300 bg-gray-200 p-6 shadow-lg transition-all hover:border-blue-500 hover:shadow-lg hover:grayscale-0 dark:border-gray-600 dark:bg-gray-700 dark:hover:border-blue-400&quot; [class]&#x3D;&quot;esQR ? &#x27;ring-1 ring-blue-500 grayscale-0&#x27; : &#x27;grayscale&#x27;&quot; (click)&#x3D;&quot;setPaymentMethod(&#x27;Q&#x27;)&quot;&gt;
                  &lt;div class&#x3D;&quot;text-center&quot;&gt;
                    &lt;img ngSrc&#x3D;&quot;/img/servicio/metodoPagoQR.webp&quot; alt&#x3D;&quot;Pago QR&quot; width&#x3D;&quot;128&quot; height&#x3D;&quot;128&quot; class&#x3D;&quot;mx-auto mb-4 object-contain&quot; /&gt;
                    &lt;h3 class&#x3D;&quot;text-xl font-bold text-gray-800 dark:text-gray-100&quot;&gt;PAGO QR&lt;/h3&gt;
                    &lt;p class&#x3D;&quot;text-md mt-2 text-gray-600 dark:text-gray-400&quot;&gt;Escanear y pagar desde su banca movil&lt;/p&gt;
                  &lt;/div&gt;
                  @if (esQR) {
                    &lt;div class&#x3D;&quot;absolute top-2 right-2&quot;&gt;
                      &lt;svg class&#x3D;&quot;h-6 w-6 text-blue-500&quot; fill&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 20 20&quot;&gt;
                        &lt;path fill-rule&#x3D;&quot;evenodd&quot; d&#x3D;&quot;M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z&quot; clip-rule&#x3D;&quot;evenodd&quot; /&gt;
                      &lt;/svg&gt;
                    &lt;/div&gt;
                  }
                &lt;/div&gt;

                &lt;!-- Card option --&gt;
                @let esTarjeta &#x3D; medioPago &#x3D;&#x3D;&#x3D; &#x27;T&#x27;;
                &lt;div class&#x3D;&quot;relative cursor-pointer rounded-lg border-2 border-gray-300 bg-gray-200 p-6 shadow-lg transition-all hover:border-blue-500 hover:shadow-lg hover:grayscale-0 dark:border-gray-600 dark:bg-gray-700 dark:hover:border-blue-400&quot; [class]&#x3D;&quot;esTarjeta ? &#x27;ring-1 ring-blue-500 grayscale-0&#x27; : &#x27;grayscale&#x27;&quot; (click)&#x3D;&quot;setPaymentMethod(&#x27;T&#x27;)&quot;&gt;
                  &lt;div class&#x3D;&quot;text-center&quot;&gt;
                    &lt;img ngSrc&#x3D;&quot;/img/servicio/metodoPagoTarjeta.webp&quot; alt&#x3D;&quot;Pago Tarjeta&quot; width&#x3D;&quot;128&quot; height&#x3D;&quot;128&quot; class&#x3D;&quot;mx-auto mb-4 object-contain&quot; /&gt;
                    &lt;h3 class&#x3D;&quot;text-xl font-bold text-gray-800 dark:text-gray-100&quot;&gt;TARJETA&lt;/h3&gt;
                    &lt;p class&#x3D;&quot;text-md mt-2 text-gray-600 dark:text-gray-400&quot;&gt;Pagar con Tarjeta Debito / Credito&lt;/p&gt;
                  &lt;/div&gt;
                  @if (esTarjeta) {
                    &lt;div class&#x3D;&quot;absolute top-2 right-2&quot;&gt;
                      &lt;svg class&#x3D;&quot;h-6 w-6 text-blue-500&quot; fill&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 20 20&quot;&gt;
                        &lt;path fill-rule&#x3D;&quot;evenodd&quot; d&#x3D;&quot;M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z&quot; clip-rule&#x3D;&quot;evenodd&quot; /&gt;
                      &lt;/svg&gt;
                    &lt;/div&gt;
                  }
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Navigation --&gt;
            &lt;div class&#x3D;&quot;mt-4 flex justify-end&quot;&gt;
              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50&quot; [disabled]&#x3D;&quot;loading() || !canAdvance()&quot; (click)&#x3D;&quot;handleNextStep()&quot;&gt;
                &lt;span&gt;Continuar&lt;/span&gt;
                &lt;svg class&#x3D;&quot;h-5 w-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M9 5l7 7-7 7&quot; /&gt;
                &lt;/svg&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- STEP 3: Billing/Shipping information --&gt;
        @if (currentStep() &#x3D;&#x3D;&#x3D; 3) {
          &lt;div [formGroup]&#x3D;&quot;form&quot;&gt;
            &lt;div class&#x3D;&quot;space-y-6&quot;&gt;
              &lt;!-- Billing fields (only if there is a commission) --&gt;
              @if (hasCommissions()) {
                &lt;!-- Article 25 alert --&gt;
                &lt;div class&#x3D;&quot;mb-6 flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-yellow-500 bg-yellow-100 px-4 py-4 text-yellow-800 dark:border-yellow-700 dark:bg-yellow-900 dark:text-yellow-200&quot;&gt;
                  &lt;div class&#x3D;&quot;flex-1&quot;&gt;&lt;span class&#x3D;&quot;font-bold&quot;&gt;Importante:&lt;/span&gt; Cuando se desconozcan los datos del comprador, se debera registrar en el campo Nombre o Razon Social la leyenda &quot;Control Tributario&quot;; y en el campo correspondiente al NIT/CI consignar el numero 99002. (RND No 102100000011 - CAPITULO IV - Articulo 25 - Inciso V)&lt;/div&gt;
                &lt;/div&gt;

                &lt;!-- Unnamed? --&gt;
                @let esSinNombre &#x3D; sinNombre &#x3D;&#x3D;&#x3D; &#x27;SI&#x27;;
                &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                  &lt;label class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt;Sin nombre?&lt;/label&gt;
                  &lt;div class&#x3D;&quot;flex flex-wrap gap-4 pl-5&quot;&gt;
                    &lt;label class&#x3D;&quot;flex cursor-pointer items-center text-lg&quot;&gt;
                      &lt;input type&#x3D;&quot;radio&quot; name&#x3D;&quot;sin-nombre&quot; value&#x3D;&quot;SI&quot; [checked]&#x3D;&quot;esSinNombre&quot; (click)&#x3D;&quot;changeBillingDataMode(true)&quot; class&#x3D;&quot;h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500&quot; /&gt;
                      &lt;span class&#x3D;&quot;pl-3 text-gray-800 dark:text-gray-200&quot;&gt;Si&lt;/span&gt;
                    &lt;/label&gt;
                    &lt;label class&#x3D;&quot;flex cursor-pointer items-center text-lg&quot;&gt;
                      &lt;input type&#x3D;&quot;radio&quot; name&#x3D;&quot;sin-nombre&quot; value&#x3D;&quot;NO&quot; [checked]&#x3D;&quot;!esSinNombre&quot; (click)&#x3D;&quot;changeBillingDataMode(false)&quot; class&#x3D;&quot;h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500&quot; /&gt;
                      &lt;span class&#x3D;&quot;pl-3 text-gray-800 dark:text-gray-200&quot;&gt;No&lt;/span&gt;
                    &lt;/label&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;!-- Name/Company name --&gt;
                &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                  &lt;label for&#x3D;&quot;input-razon-social&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Nombre / Razon social&lt;span class&#x3D;&quot;text-red-500&quot;&gt; *&lt;/span&gt; &lt;/label&gt;
                  &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;input-razon-social&quot; formControlName&#x3D;&quot;razonSocial&quot; maxlength&#x3D;&quot;250&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 px-4 py-3 text-sm uppercase transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800&quot; [class]&#x3D;&quot;esSinNombre ? &#x27;cursor-not-allowed bg-gray-100 opacity-80&#x27; : &#x27;bg-white&#x27;&quot; [readOnly]&#x3D;&quot;esSinNombre&quot; /&gt;
                &lt;/div&gt;

                &lt;!-- Document type and Document number --&gt;
                &lt;div class&#x3D;&quot;mb-6 flex flex-col gap-3 md:flex-row md:gap-4&quot;&gt;
                  &lt;!-- Document type --&gt;
                  &lt;div class&#x3D;&quot;w-full md:w-1/2&quot;&gt;
                    &lt;label for&#x3D;&quot;select-tipo-documento&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Tipo documento&lt;span class&#x3D;&quot;text-red-500&quot;&gt; *&lt;/span&gt; &lt;/label&gt;
                    &lt;select id&#x3D;&quot;select-tipo-documento&quot; formControlName&#x3D;&quot;tipoDocumento&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800&quot;&gt;
                      &lt;option [ngValue]&#x3D;&quot;1&quot;&gt;Carnet identidad&lt;/option&gt;
                      &lt;option [ngValue]&#x3D;&quot;2&quot;&gt;Carnet identidad extranjero&lt;/option&gt;
                      &lt;option [ngValue]&#x3D;&quot;3&quot;&gt;Pasaporte&lt;/option&gt;
                      &lt;option [ngValue]&#x3D;&quot;4&quot;&gt;Otro documento de identidad&lt;/option&gt;
                      &lt;option [ngValue]&#x3D;&quot;5&quot;&gt;NIT (Nro.Identificacion Tributaria)&lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;

                  &lt;!-- Document number --&gt;
                  &lt;div class&#x3D;&quot;w-full md:w-1/2&quot;&gt;
                    &lt;label for&#x3D;&quot;input-documento-sin&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Nro.Documento&lt;span class&#x3D;&quot;text-red-500&quot;&gt; *&lt;/span&gt; &lt;/label&gt;
                    &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;input-documento-sin&quot; formControlName&#x3D;&quot;documentoSIN&quot; maxlength&#x3D;&quot;14&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800&quot; [class]&#x3D;&quot;esSinNombre ? &#x27;cursor-not-allowed bg-gray-100 opacity-80&#x27; : &#x27;bg-white&#x27;&quot; [readOnly]&#x3D;&quot;esSinNombre&quot; /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;!-- Complement (only if it is CI) --&gt;
                @if (tipoDocumento &#x3D;&#x3D;&#x3D; 1) {
                  &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                    &lt;label for&#x3D;&quot;input-complemento-sin&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Complemento (Opcional) &lt;/label&gt;
                    &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;input-complemento-sin&quot; formControlName&#x3D;&quot;complementoSIN&quot; maxlength&#x3D;&quot;2&quot; placeholder&#x3D;&quot;Ej: 1A&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm uppercase transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200&quot; /&gt;
                  &lt;/div&gt;
                }

                &lt;!-- Exception with NIT --&gt;
                @if (showExceptionNIT()) {
                  &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                    &lt;label class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt;Excepcion con NIT?&lt;/label&gt;
                    &lt;div class&#x3D;&quot;flex flex-wrap gap-4&quot;&gt;
                      &lt;label class&#x3D;&quot;flex cursor-pointer items-center text-lg select-none&quot;&gt;
                        &lt;input type&#x3D;&quot;radio&quot; name&#x3D;&quot;excepcion-nit&quot; value&#x3D;&quot;false&quot; [checked]&#x3D;&quot;excepcionNIT &#x3D;&#x3D;&#x3D; &#x27;false&#x27;&quot; (change)&#x3D;&quot;setExceptionNIT(&#x27;false&#x27;)&quot; class&#x3D;&quot;h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500&quot; /&gt;
                        &lt;span class&#x3D;&quot;pl-3 text-gray-800 dark:text-gray-200&quot;&gt;No&lt;/span&gt;
                      &lt;/label&gt;
                      &lt;label class&#x3D;&quot;flex cursor-pointer items-center text-lg select-none&quot;&gt;
                        &lt;input type&#x3D;&quot;radio&quot; name&#x3D;&quot;excepcion-nit&quot; value&#x3D;&quot;true&quot; [checked]&#x3D;&quot;excepcionNIT &#x3D;&#x3D;&#x3D; &#x27;true&#x27;&quot; (change)&#x3D;&quot;setExceptionNIT(&#x27;true&#x27;)&quot; class&#x3D;&quot;h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500&quot; /&gt;
                        &lt;span class&#x3D;&quot;pl-3 text-gray-800 dark:text-gray-200&quot;&gt;Si&lt;/span&gt;
                      &lt;/label&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                }
              }

              &lt;!-- Email and Telephone (always visible) --&gt;
              &lt;div class&#x3D;&quot;grid grid-cols-1 gap-4 sm:grid-cols-2&quot;&gt;
                &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                  &lt;label for&#x3D;&quot;correo-electronico-input&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Correo electronico&lt;span class&#x3D;&quot;text-red-500&quot;&gt; *&lt;/span&gt; &lt;/label&gt;
                  &lt;input type&#x3D;&quot;email&quot; id&#x3D;&quot;correo-electronico-input&quot; formControlName&#x3D;&quot;correoElectronico&quot; maxlength&#x3D;&quot;100&quot; placeholder&#x3D;&quot;ejemplo&amp;#64;correo.com&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200&quot; /&gt;
                &lt;/div&gt;

                &lt;div class&#x3D;&quot;mb-6&quot;&gt;
                  &lt;label for&#x3D;&quot;telefono-input&quot; class&#x3D;&quot;mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200&quot;&gt; Telefono (Opcional) &lt;/label&gt;
                  &lt;input type&#x3D;&quot;tel&quot; id&#x3D;&quot;telefono-input&quot; formControlName&#x3D;&quot;numeroTelefono&quot; maxlength&#x3D;&quot;20&quot; placeholder&#x3D;&quot;+591 XX XXX XXXX&quot; class&#x3D;&quot;w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200&quot; /&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Navigation buttons --&gt;
            &lt;div class&#x3D;&quot;mt-4 flex justify-end&quot;&gt;
              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50&quot; [disabled]&#x3D;&quot;loading() || !canAdvance()&quot; (click)&#x3D;&quot;handleNextStep()&quot;&gt;
                &lt;span&gt;Continuar&lt;/span&gt;
                &lt;svg class&#x3D;&quot;h-5 w-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M9 5l7 7-7 7&quot; /&gt;
                &lt;/svg&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- STEP 4: Final summary --&gt;
        @if (currentStep() &#x3D;&#x3D;&#x3D; 4) {
          &lt;div&gt;
            &lt;div class&#x3D;&quot;space-y-6&quot;&gt;
              &lt;!-- Included services --&gt;
              &lt;div class&#x3D;&quot;rounded-lg border border-gray-200 px-6 pt-6 pb-2 dark:border-gray-700&quot;&gt;
                &lt;h3 class&#x3D;&quot;text-lg font-bold text-gray-900 dark:text-white&quot;&gt;Servicios a pagar&lt;/h3&gt;

                @for (item of itemsCart(); track item.fechaAdicion; let i &#x3D; $index) {
                  &lt;div class&#x3D;&quot;mt-4 border-b border-gray-200 pb-4 last:border-b-0 dark:border-gray-700&quot;&gt;
                    &lt;div class&#x3D;&quot;mb-2 flex items-center justify-between&quot;&gt;
                      &lt;div class&#x3D;&quot;flex items-center gap-2&quot;&gt;
                        &lt;div class&#x3D;&quot;flex items-center justify-center rounded bg-blue-100 px-4 dark:bg-blue-900&quot;&gt;
                          &lt;span class&#x3D;&quot;text-sm font-bold text-blue-600 dark:text-blue-300&quot;&gt;
                            {{ item.nombreServicio }}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                      &lt;span class&#x3D;&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
                        {{ item.deudasSeleccionadas.length }}
                        {{ item.deudasSeleccionadas.length &#x3D;&#x3D;&#x3D; 1 ? item.descripcionDocOficial : getOfficialDocDescriptionPlural() }}
                      &lt;/span&gt;
                    &lt;/div&gt;
                    &lt;p class&#x3D;&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})&lt;/p&gt;
                  &lt;/div&gt;
                }
              &lt;/div&gt;

              &lt;!-- Totals --&gt;
              &lt;div class&#x3D;&quot;rounded-lg border border-gray-200 p-6 dark:border-gray-700&quot;&gt;
                &lt;h3 class&#x3D;&quot;mb-4 text-lg font-bold text-gray-900 dark:text-white&quot;&gt;Detalle a pagar&lt;/h3&gt;

                &lt;div class&#x3D;&quot;space-y-2&quot;&gt;
                  &lt;div class&#x3D;&quot;flex justify-between text-gray-700 dark:text-gray-300&quot;&gt;
                    &lt;span&gt;Subtotal {{ quantitySelectedDebts() }} {{ getOfficialDocDescriptionPlural() }}:&lt;/span&gt;
                    &lt;span&gt;{{ currencySymbol() }} {{ formatNumber(totalServices()) }}&lt;/span&gt;
                  &lt;/div&gt;
                  @if (totalCommissions() &gt; 0) {
                    &lt;div class&#x3D;&quot;flex justify-between text-gray-700 dark:text-gray-300&quot;&gt;
                      &lt;span&gt;Comision total:&lt;/span&gt;
                      &lt;span&gt;{{ currencySymbol() }} {{ formatNumber(totalCommissions()) }}&lt;/span&gt;
                    &lt;/div&gt;
                  }
                  &lt;div class&#x3D;&quot;mt-4 flex justify-between border-t border-gray-300 pt-4 text-xl font-bold text-gray-900 dark:border-gray-600 dark:text-white&quot;&gt;
                    &lt;span&gt;TOTAL A PAGAR:&lt;/span&gt;
                    &lt;span class&#x3D;&quot;text-blue-600 dark:text-blue-400&quot;&gt;{{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;!-- Billing information (if applicable) --&gt;
              @if (hasCommissions()) {
                &lt;div class&#x3D;&quot;rounded-lg border border-gray-200 p-6 dark:border-gray-700&quot;&gt;
                  &lt;h3 class&#x3D;&quot;mb-4 text-lg font-bold text-gray-900 dark:text-white&quot;&gt;Datos de Facturacion&lt;/h3&gt;

                  &lt;div class&#x3D;&quot;space-y-2 text-sm&quot;&gt;
                    &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                      &lt;span class&#x3D;&quot;text-gray-600 dark:text-gray-400&quot;&gt;Razon Social:&lt;/span&gt;
                      &lt;span class&#x3D;&quot;font-medium text-gray-900 dark:text-white&quot;&gt;{{ razonSocial }}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                      &lt;span class&#x3D;&quot;text-gray-600 dark:text-gray-400&quot;&gt;NIT/CI:&lt;/span&gt;
                      &lt;span class&#x3D;&quot;font-medium text-gray-900 dark:text-white&quot;&gt;
                        {{ documentoSIN }}
                        @if (complementoSIN) {
                          &lt;span&gt;-{{ complementoSIN }}&lt;/span&gt;
                        }
                      &lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              }

              &lt;!-- Shipping information --&gt;
              &lt;div class&#x3D;&quot;rounded-lg border border-gray-200 p-6 dark:border-gray-700&quot;&gt;
                &lt;h3 class&#x3D;&quot;mb-4 text-lg font-bold text-gray-900 dark:text-white&quot;&gt;Datos de Envio&lt;/h3&gt;

                &lt;div class&#x3D;&quot;space-y-2 text-sm&quot;&gt;
                  &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                    &lt;span class&#x3D;&quot;text-gray-600 dark:text-gray-400&quot;&gt;Correo:&lt;/span&gt;
                    &lt;span class&#x3D;&quot;font-medium text-gray-900 dark:text-white&quot;&gt;{{ correoElectronico }}&lt;/span&gt;
                  &lt;/div&gt;
                  @if (numeroTelefono &amp;&amp; numeroTelefono !&#x3D;&#x3D; &#x27;0&#x27;) {
                    &lt;div class&#x3D;&quot;flex justify-between&quot;&gt;
                      &lt;span class&#x3D;&quot;text-gray-600 dark:text-gray-400&quot;&gt;Telefono:&lt;/span&gt;
                      &lt;span class&#x3D;&quot;font-medium text-gray-900 dark:text-white&quot;&gt;{{ numeroTelefono }}&lt;/span&gt;
                    &lt;/div&gt;
                  }
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;!-- Important information --&gt;
              &lt;div class&#x3D;&quot;flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-blue-500 bg-blue-100 px-4 py-4 text-blue-800 dark:border-blue-700 dark:bg-blue-900 dark:text-blue-200&quot;&gt;
                &lt;div class&#x3D;&quot;flex-1&quot;&gt;
                  &lt;div class&#x3D;&quot;font-bold&quot;&gt;Importante:&lt;/div&gt;
                  &lt;div&gt;Al confirmar, se generara un codigo QR con validez de 24 horas.&lt;/div&gt;
                  &lt;div&gt;Los documentos de pago se enviaran al correo electronico indicado.&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Navigation buttons --&gt;
            &lt;div class&#x3D;&quot;mt-8 flex justify-between&quot;&gt;
              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50&quot; [disabled]&#x3D;&quot;loading()&quot; (click)&#x3D;&quot;prevStep()&quot;&gt;
                &lt;svg class&#x3D;&quot;h-5 w-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M15 19l-7-7 7-7&quot; /&gt;
                &lt;/svg&gt;
                &lt;span&gt;Atras&lt;/span&gt;
              &lt;/button&gt;

              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-green-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-green-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50&quot; [disabled]&#x3D;&quot;loading()&quot; (click)&#x3D;&quot;processPayment()&quot;&gt;
                &lt;svg class&#x3D;&quot;h-6 w-6&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot; /&gt;
                &lt;/svg&gt;
                &lt;span&gt;{{ loading() ? &#x27;Procesando...&#x27; : &#x27;Generar QR de pago&#x27; }}&lt;/span&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        }

        &lt;!-- STEP 5: QR Code generated --&gt;
        @if (currentStep() &#x3D;&#x3D;&#x3D; 5) {
          &lt;div&gt;
            &lt;app-qr-display [qrImage]&#x3D;&quot;qrData().qrImage&quot; [validity]&#x3D;&quot;qrData().validity&quot; [email]&#x3D;&quot;correoElectronico&quot;&gt;
              &lt;!-- Exit button projected into the slot --&gt;
              &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;inline-flex cursor-pointer items-center gap-2 rounded-md bg-gray-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-gray-600 hover:shadow-lg&quot; (click)&#x3D;&quot;exitCart()&quot;&gt;
                &lt;svg class&#x3D;&quot;h-6 w-6&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path stroke-linecap&#x3D;&quot;round&quot; stroke-linejoin&#x3D;&quot;round&quot; stroke-width&#x3D;&quot;2&quot; d&#x3D;&quot;M6 18L18 6M6 6l12 12&quot; /&gt;
                &lt;/svg&gt;
                &lt;span&gt;Salir del carrito&lt;/span&gt;
              &lt;/button&gt;
            &lt;/app-qr-display&gt;
          &lt;/div&gt;
        }
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/main&gt;
</code></pre>
    </div>


    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis-network.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><main class="dark:bg-gray-900">  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">    <!-- Loading overlay -->    @if (loading()) {      <div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50">        <app-loading size="lg" text="Procesando..."></app-loading>      </div>    }    <!-- Cart wizard -->    <div class="relative mx-auto max-w-250 py-5">      <!-- Page title -->      <app-wizard-header cardTitle="CARRITO" (buttonClose)="goToHome()" />      <!-- Wizard container -->      <div class="relative overflow-visible rounded-lg bg-gray-100 p-4 shadow-md sm:p-8 dark:bg-gray-800">        <!-- Badge step number -->        @if (hasItems() || currentStep() === 5) {          <div class="absolute -top-2 right-4 z-10 flex h-20 w-20 items-center justify-center rounded bg-blue-500 text-5xl font-bold text-white shadow-lg dark:bg-blue-600">            {{ currentStep() }}          </div>        }        <!-- Progress bar -->        @if (hasItems() || currentStep() === 5) {          <div class="mb-8">            <div class="mb-2 flex justify-between text-sm text-gray-800 dark:text-gray-200">              <span>{{ stepLabel() }}</span>            </div>            <div class="relative h-2 w-full overflow-hidden rounded-full bg-gray-300 dark:bg-gray-600">              <div class="relative h-full rounded-full bg-linear-to-r from-blue-500 to-blue-600 transition-all duration-400 ease-in-out" [style.width.%]="progress()"></div>            </div>          </div>        }        <!-- Error alerts -->        @if (errors().length > 0) {          <div class="mb-4 flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-red-500 bg-red-100 px-4 py-4 text-red-800 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200">            <div class="flex-1">              <div class="mb-1 font-semibold">                {{ errors().length > 1 ? \'Errores de validacion:\' : \'Error de validacion:\' }}              </div>              <ul class="mt-2 list-inside list-disc text-xl">                @for (error of errors(); track error) {                  <li>{{ error }}</li>                }              </ul>            </div>          </div>        }        <!-- STEP 1: Cart review -->        @if (currentStep() === 1) {          <div>            <!-- Empty cart -->            @if (!hasItems()) {              <div class="pt-12 pb-3 text-center">                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />                </svg>                <h3 class="mt-2 text-lg font-medium text-gray-900 dark:text-white">El carrito esta vacio</h3>                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Agregue servicios desde la pagina principal</p>              </div>            }            <!-- Items in cart -->            @if (hasItems()) {              <div class="space-y-4">                <!-- Mobile view: Cards (< sm breakpoint) -->                <div class="sm:hidden">                  @for (item of itemsCart(); track item.fechaAdicion; let i = $index) {                    <div class="mb-4 rounded-lg border border-gray-200 dark:border-gray-700">                      <!-- Service Header -->                      <div class="bg-gray-200 px-4 py-3 dark:bg-gray-700">                        <div class="flex items-center justify-between">                          <div>                            <h3 class="text-lg font-bold text-gray-900 dark:text-white">                              {{ item.nombreServicio }}                            </h3>                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})</p>                          </div>                          <!-- Delete button (mobile - sin tooltip) -->                          <button type="button" class="inline-flex cursor-pointer text-red-600 hover:text-red-800 dark:text-red-400" (click)="removeItem(i)" [attr.aria-label]="\'Eliminar pago de \' + item.nombreServicio">                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />                            </svg>                          </button>                        </div>                      </div>                      <!-- Debt Cards (nested loop) -->                      <div class="space-y-2 p-4">                        @for (deuda of item.deudasSeleccionadas; track deuda.documentoPago) {                          <div class="rounded-md border border-gray-300 bg-white p-3 dark:border-gray-600 dark:bg-gray-800">                            <!-- Period (prominent) -->                            <div class="mb-2 text-base font-bold text-gray-900 dark:text-gray-100">                              {{ deuda.periodoCobro }}                            </div>                            <!-- Document -->                            <div class="flex justify-between text-sm">                              <span class="text-gray-600 dark:text-gray-400">{{ item.descripcionDocOficial }}:</span>                              <span class="font-medium text-gray-900 dark:text-gray-100">                                {{ deuda.documentoPago }}                              </span>                            </div>                            <!-- Amount -->                            <div class="flex justify-between text-base">                              <span class="font-semibold text-gray-700 dark:text-gray-300"> Deuda {{ currencySymbol() }}: </span>                              <span class="font-bold text-gray-900 dark:text-gray-100">                                {{ formatNumber(deuda.periodoServicio) }}                              </span>                            </div>                          </div>                        }                      </div>                      <!-- Commission Row (if applicable) -->                      @if (item.totalComision > 0) {                        <div class="border-t border-gray-300 bg-yellow-50 px-4 py-3 dark:border-gray-600 dark:bg-yellow-900/20">                          <div class="flex justify-between">                            <span class="text-sm font-semibold text-gray-700 dark:text-gray-300"> Comision facturable </span>                            <span class="text-base font-semibold text-gray-900 dark:text-gray-100">                              {{ formatNumber(item.totalComision) }}                            </span>                          </div>                        </div>                      }                      <!-- Service Subtotal -->                      <div class="border-t-2 border-gray-400 bg-gray-200 px-4 py-3 dark:border-gray-500 dark:bg-gray-700">                        <div class="flex justify-between">                          <span class="text-base font-bold text-gray-900 dark:text-gray-100"> Subtotal {{ currencySymbol() }} </span>                          <span class="text-lg font-bold text-blue-600 dark:text-blue-400">                            {{ formatNumber(item.totalServicio + item.totalComision) }}                          </span>                        </div>                      </div>                    </div>                  }                  <!-- Grand Total (mobile) -->                  <div class="mt-2 mb-6 text-right">                    <div class="w-full rounded-md border border-gray-300 bg-blue-500 px-4 py-3 text-3xl font-bold text-white dark:border-blue-700 dark:bg-blue-600">Total {{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}</div>                  </div>                </div>                <!-- Desktop view: Table (>= sm breakpoint) -->                <div class="hidden sm:block">                  @for (item of itemsCart(); track item.fechaAdicion; let i = $index) {                    <div class="mb-4 rounded-lg border border-gray-200 p-4 dark:border-gray-700">                      <!-- Service Header -->                      <div class="flex items-center justify-between">                        <div class="flex items-center gap-3">                          <div>                            <h3 class="text-lg font-bold text-gray-900 dark:text-white">                              {{ item.nombreServicio }}                            </h3>                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})</p>                          </div>                        </div>                        <!-- Delete button with tooltip -->                        <div class="relative">                          <button type="button" class="inline-flex cursor-pointer text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" (click)="removeItem(i)" (mouseenter)="showDeleteTooltip.set(i)" (mouseleave)="showDeleteTooltip.set(null)">                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />                            </svg>                          </button>                          @if (showDeleteTooltip() === i) {                            <div class="pointer-events-none absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">                              <span>Eliminar pago</span>                              <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>                            </div>                          }                        </div>                      </div>                      <!-- Debt table -->                      <div class="mt-4">                        <div class="mt-4 overflow-x-auto rounded-md border border-gray-300 dark:border-gray-600">                          <table class="w-full border-collapse text-lg dark:text-gray-200">                            <thead class="bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200">                              <tr>                                <th class="px-3 py-3 text-left text-base font-semibold tracking-wide uppercase">Periodo</th>                                <th class="px-3 py-3 text-left text-base font-semibold tracking-wide uppercase">{{ item.descripcionDocOficial }}</th>                                <th class="px-3 py-3 text-right text-base font-semibold tracking-wide uppercase">Deuda {{ currencySymbol() }}</th>                              </tr>                            </thead>                            <tbody>                              @for (deuda of item.deudasSeleccionadas; track deuda.documentoPago) {                                <tr class="border-b border-gray-200 dark:border-gray-700">                                  <td class="px-3 text-left">{{ deuda.periodoCobro }}</td>                                  <td class="px-3 text-left">{{ deuda.documentoPago }}</td>                                  <td class="px-3 text-right">                                    {{ formatNumber(deuda.periodoServicio) }}                                  </td>                                </tr>                              }                            </tbody>                            <tfoot class="border-b border-gray-200 dark:border-gray-700">                              @if (item.totalComision > 0) {                                <tr class="bg-yellow-50 dark:bg-yellow-900/20">                                  <td colspan="2" class="border-b border-gray-300 px-3 py-3 dark:border-gray-600 dark:text-gray-200">Comision facturable a cobrar</td>                                  <td class="border-b border-gray-300 px-3 py-3 text-right dark:border-gray-600 dark:text-gray-200">                                    {{ formatNumber(item.totalComision) }}                                  </td>                                </tr>                              }                              <tr class="bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200">                                <td colspan="3" class="border-t-2 border-gray-400 px-3 py-3 text-right font-semibold dark:border-gray-500 dark:text-gray-200">{{ currencySymbol() }} {{ formatNumber(item.totalServicio + item.totalComision) }}</td>                              </tr>                            </tfoot>                          </table>                        </div>                      </div>                    </div>                  }                  <!-- Total amount collected -->                  <div class="mt-2 mb-6 text-right">                    <div class="w-full rounded-md border border-gray-300 bg-blue-500 px-4 py-3 text-3xl font-bold text-white transition-all dark:border-blue-700 dark:bg-blue-600">Total {{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}</div>                  </div>                </div>              </div>            }            <!-- Navigation buttons -->            <div class="mt-8 flex" [class.justify-center]="!hasItems()" [class.justify-between]="hasItems()">              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg" (click)="addMoreServices()">                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />                </svg>                <span>Agregar servicios</span>              </button>              @if (hasItems()) {                <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50" [disabled]="loading()" (click)="handleProcessPaymentClick()">                  <span class="sm:hidden">Pagar</span>                  <span class="hidden sm:inline">Continuar el pago</span>                  <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />                  </svg>                </button>              }            </div>          </div>        }        <!-- STEP 2: Payment method -->        @if (currentStep() === 2) {          <div>            <div>              <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Seleccionar metodo de pago</p>            </div>            <div class="min-h-25">              <div class="grid grid-cols-1 gap-6 pt-2 sm:grid-cols-2">                <!-- QR option -->                @let esQR = medioPago === \'Q\';                <div class="relative cursor-pointer rounded-lg border-2 border-gray-300 bg-gray-200 p-6 shadow-lg transition-all hover:border-blue-500 hover:shadow-lg hover:grayscale-0 dark:border-gray-600 dark:bg-gray-700 dark:hover:border-blue-400" [class]="esQR ? \'ring-1 ring-blue-500 grayscale-0\' : \'grayscale\'" (click)="setPaymentMethod(\'Q\')">                  <div class="text-center">                    <img ngSrc="/img/servicio/metodoPagoQR.webp" alt="Pago QR" width="128" height="128" class="mx-auto mb-4 object-contain" />                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">PAGO QR</h3>                    <p class="text-md mt-2 text-gray-600 dark:text-gray-400">Escanear y pagar desde su banca movil</p>                  </div>                  @if (esQR) {                    <div class="absolute top-2 right-2">                      <svg class="h-6 w-6 text-blue-500" fill="currentColor" viewBox="0 0 20 20">                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />                      </svg>                    </div>                  }                </div>                <!-- Card option -->                @let esTarjeta = medioPago === \'T\';                <div class="relative cursor-pointer rounded-lg border-2 border-gray-300 bg-gray-200 p-6 shadow-lg transition-all hover:border-blue-500 hover:shadow-lg hover:grayscale-0 dark:border-gray-600 dark:bg-gray-700 dark:hover:border-blue-400" [class]="esTarjeta ? \'ring-1 ring-blue-500 grayscale-0\' : \'grayscale\'" (click)="setPaymentMethod(\'T\')">                  <div class="text-center">                    <img ngSrc="/img/servicio/metodoPagoTarjeta.webp" alt="Pago Tarjeta" width="128" height="128" class="mx-auto mb-4 object-contain" />                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">TARJETA</h3>                    <p class="text-md mt-2 text-gray-600 dark:text-gray-400">Pagar con Tarjeta Debito / Credito</p>                  </div>                  @if (esTarjeta) {                    <div class="absolute top-2 right-2">                      <svg class="h-6 w-6 text-blue-500" fill="currentColor" viewBox="0 0 20 20">                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />                      </svg>                    </div>                  }                </div>              </div>            </div>            <!-- Navigation -->            <div class="mt-4 flex justify-end">              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50" [disabled]="loading() || !canAdvance()" (click)="handleNextStep()">                <span>Continuar</span>                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />                </svg>              </button>            </div>          </div>        }        <!-- STEP 3: Billing/Shipping information -->        @if (currentStep() === 3) {          <div [formGroup]="form">            <div class="space-y-6">              <!-- Billing fields (only if there is a commission) -->              @if (hasCommissions()) {                <!-- Article 25 alert -->                <div class="mb-6 flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-yellow-500 bg-yellow-100 px-4 py-4 text-yellow-800 dark:border-yellow-700 dark:bg-yellow-900 dark:text-yellow-200">                  <div class="flex-1"><span class="font-bold">Importante:</span> Cuando se desconozcan los datos del comprador, se debera registrar en el campo Nombre o Razon Social la leyenda "Control Tributario"; y en el campo correspondiente al NIT/CI consignar el numero 99002. (RND No 102100000011 - CAPITULO IV - Articulo 25 - Inciso V)</div>                </div>                <!-- Unnamed? -->                @let esSinNombre = sinNombre === \'SI\';                <div class="mb-6">                  <label class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200">Sin nombre?</label>                  <div class="flex flex-wrap gap-4 pl-5">                    <label class="flex cursor-pointer items-center text-lg">                      <input type="radio" name="sin-nombre" value="SI" [checked]="esSinNombre" (click)="changeBillingDataMode(true)" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500" />                      <span class="pl-3 text-gray-800 dark:text-gray-200">Si</span>                    </label>                    <label class="flex cursor-pointer items-center text-lg">                      <input type="radio" name="sin-nombre" value="NO" [checked]="!esSinNombre" (click)="changeBillingDataMode(false)" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500" />                      <span class="pl-3 text-gray-800 dark:text-gray-200">No</span>                    </label>                  </div>                </div>                <!-- Name/Company name -->                <div class="mb-6">                  <label for="input-razon-social" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Nombre / Razon social<span class="text-red-500"> *</span> </label>                  <input type="text" id="input-razon-social" formControlName="razonSocial" maxlength="250" class="w-full rounded-md border border-gray-300 px-4 py-3 text-sm uppercase transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800" [class]="esSinNombre ? \'cursor-not-allowed bg-gray-100 opacity-80\' : \'bg-white\'" [readOnly]="esSinNombre" />                </div>                <!-- Document type and Document number -->                <div class="mb-6 flex flex-col gap-3 md:flex-row md:gap-4">                  <!-- Document type -->                  <div class="w-full md:w-1/2">                    <label for="select-tipo-documento" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Tipo documento<span class="text-red-500"> *</span> </label>                    <select id="select-tipo-documento" formControlName="tipoDocumento" class="w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800">                      <option [ngValue]="1">Carnet identidad</option>                      <option [ngValue]="2">Carnet identidad extranjero</option>                      <option [ngValue]="3">Pasaporte</option>                      <option [ngValue]="4">Otro documento de identidad</option>                      <option [ngValue]="5">NIT (Nro.Identificacion Tributaria)</option>                    </select>                  </div>                  <!-- Document number -->                  <div class="w-full md:w-1/2">                    <label for="input-documento-sin" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Nro.Documento<span class="text-red-500"> *</span> </label>                    <input type="text" id="input-documento-sin" formControlName="documentoSIN" maxlength="14" class="w-full rounded-md border border-gray-300 px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:font-semibold disabled:opacity-80 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:disabled:bg-gray-800" [class]="esSinNombre ? \'cursor-not-allowed bg-gray-100 opacity-80\' : \'bg-white\'" [readOnly]="esSinNombre" />                  </div>                </div>                <!-- Complement (only if it is CI) -->                @if (tipoDocumento === 1) {                  <div class="mb-6">                    <label for="input-complemento-sin" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Complemento (Opcional) </label>                    <input type="text" id="input-complemento-sin" formControlName="complementoSIN" maxlength="2" placeholder="Ej: 1A" class="w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm uppercase transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200" />                  </div>                }                <!-- Exception with NIT -->                @if (showExceptionNIT()) {                  <div class="mb-6">                    <label class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200">Excepcion con NIT?</label>                    <div class="flex flex-wrap gap-4">                      <label class="flex cursor-pointer items-center text-lg select-none">                        <input type="radio" name="excepcion-nit" value="false" [checked]="excepcionNIT === \'false\'" (change)="setExceptionNIT(\'false\')" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500" />                        <span class="pl-3 text-gray-800 dark:text-gray-200">No</span>                      </label>                      <label class="flex cursor-pointer items-center text-lg select-none">                        <input type="radio" name="excepcion-nit" value="true" [checked]="excepcionNIT === \'true\'" (change)="setExceptionNIT(\'true\')" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500" />                        <span class="pl-3 text-gray-800 dark:text-gray-200">Si</span>                      </label>                    </div>                  </div>                }              }              <!-- Email and Telephone (always visible) -->              <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">                <div class="mb-6">                  <label for="correo-electronico-input" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Correo electronico<span class="text-red-500"> *</span> </label>                  <input type="email" id="correo-electronico-input" formControlName="correoElectronico" maxlength="100" placeholder="ejemplo&#64;correo.com" class="w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200" />                </div>                <div class="mb-6">                  <label for="telefono-input" class="mb-2 block text-lg font-semibold text-gray-800 dark:text-gray-200"> Telefono (Opcional) </label>                  <input type="tel" id="telefono-input" formControlName="numeroTelefono" maxlength="20" placeholder="+591 XX XXX XXXX" class="w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm transition-all focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200" />                </div>              </div>            </div>            <!-- Navigation buttons -->            <div class="mt-4 flex justify-end">              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50" [disabled]="loading() || !canAdvance()" (click)="handleNextStep()">                <span>Continuar</span>                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />                </svg>              </button>            </div>          </div>        }        <!-- STEP 4: Final summary -->        @if (currentStep() === 4) {          <div>            <div class="space-y-6">              <!-- Included services -->              <div class="rounded-lg border border-gray-200 px-6 pt-6 pb-2 dark:border-gray-700">                <h3 class="text-lg font-bold text-gray-900 dark:text-white">Servicios a pagar</h3>                @for (item of itemsCart(); track item.fechaAdicion; let i = $index) {                  <div class="mt-4 border-b border-gray-200 pb-4 last:border-b-0 dark:border-gray-700">                    <div class="mb-2 flex items-center justify-between">                      <div class="flex items-center gap-2">                        <div class="flex items-center justify-center rounded bg-blue-100 px-4 dark:bg-blue-900">                          <span class="text-sm font-bold text-blue-600 dark:text-blue-300">                            {{ item.nombreServicio }}                          </span>                        </div>                      </div>                      <span class="text-sm text-gray-600 dark:text-gray-400">                        {{ item.deudasSeleccionadas.length }}                        {{ item.deudasSeleccionadas.length === 1 ? item.descripcionDocOficial : getOfficialDocDescriptionPlural() }}                      </span>                    </div>                    <p class="text-sm text-gray-600 dark:text-gray-400">{{ item.nombreAsociado }} (#{{ item.codigoDeuda }})</p>                  </div>                }              </div>              <!-- Totals -->              <div class="rounded-lg border border-gray-200 p-6 dark:border-gray-700">                <h3 class="mb-4 text-lg font-bold text-gray-900 dark:text-white">Detalle a pagar</h3>                <div class="space-y-2">                  <div class="flex justify-between text-gray-700 dark:text-gray-300">                    <span>Subtotal {{ quantitySelectedDebts() }} {{ getOfficialDocDescriptionPlural() }}:</span>                    <span>{{ currencySymbol() }} {{ formatNumber(totalServices()) }}</span>                  </div>                  @if (totalCommissions() > 0) {                    <div class="flex justify-between text-gray-700 dark:text-gray-300">                      <span>Comision total:</span>                      <span>{{ currencySymbol() }} {{ formatNumber(totalCommissions()) }}</span>                    </div>                  }                  <div class="mt-4 flex justify-between border-t border-gray-300 pt-4 text-xl font-bold text-gray-900 dark:border-gray-600 dark:text-white">                    <span>TOTAL A PAGAR:</span>                    <span class="text-blue-600 dark:text-blue-400">{{ currencySymbol() }} {{ formatNumber(totalGeneral()) }}</span>                  </div>                </div>              </div>              <!-- Billing information (if applicable) -->              @if (hasCommissions()) {                <div class="rounded-lg border border-gray-200 p-6 dark:border-gray-700">                  <h3 class="mb-4 text-lg font-bold text-gray-900 dark:text-white">Datos de Facturacion</h3>                  <div class="space-y-2 text-sm">                    <div class="flex justify-between">                      <span class="text-gray-600 dark:text-gray-400">Razon Social:</span>                      <span class="font-medium text-gray-900 dark:text-white">{{ razonSocial }}</span>                    </div>                    <div class="flex justify-between">                      <span class="text-gray-600 dark:text-gray-400">NIT/CI:</span>                      <span class="font-medium text-gray-900 dark:text-white">                        {{ documentoSIN }}                        @if (complementoSIN) {                          <span>-{{ complementoSIN }}</span>                        }                      </span>                    </div>                  </div>                </div>              }              <!-- Shipping information -->              <div class="rounded-lg border border-gray-200 p-6 dark:border-gray-700">                <h3 class="mb-4 text-lg font-bold text-gray-900 dark:text-white">Datos de Envio</h3>                <div class="space-y-2 text-sm">                  <div class="flex justify-between">                    <span class="text-gray-600 dark:text-gray-400">Correo:</span>                    <span class="font-medium text-gray-900 dark:text-white">{{ correoElectronico }}</span>                  </div>                  @if (numeroTelefono && numeroTelefono !== \'0\') {                    <div class="flex justify-between">                      <span class="text-gray-600 dark:text-gray-400">Telefono:</span>                      <span class="font-medium text-gray-900 dark:text-white">{{ numeroTelefono }}</span>                    </div>                  }                </div>              </div>              <!-- Important information -->              <div class="flex items-start gap-3 rounded-md border-t border-r border-b border-l-4 border-blue-500 bg-blue-100 px-4 py-4 text-blue-800 dark:border-blue-700 dark:bg-blue-900 dark:text-blue-200">                <div class="flex-1">                  <div class="font-bold">Importante:</div>                  <div>Al confirmar, se generara un codigo QR con validez de 24 horas.</div>                  <div>Los documentos de pago se enviaran al correo electronico indicado.</div>                </div>              </div>            </div>            <!-- Navigation buttons -->            <div class="mt-8 flex justify-between">              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-blue-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-blue-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50" [disabled]="loading()" (click)="prevStep()">                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />                </svg>                <span>Atras</span>              </button>              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-green-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-green-600 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50" [disabled]="loading()" (click)="processPayment()">                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />                </svg>                <span>{{ loading() ? \'Procesando...\' : \'Generar QR de pago\' }}</span>              </button>            </div>          </div>        }        <!-- STEP 5: QR Code generated -->        @if (currentStep() === 5) {          <div>            <app-qr-display [qrImage]="qrData().qrImage" [validity]="qrData().validity" [email]="correoElectronico">              <!-- Exit button projected into the slot -->              <button type="button" class="inline-flex cursor-pointer items-center gap-2 rounded-md bg-gray-500 px-4 py-3 text-base leading-normal font-semibold whitespace-nowrap text-white hover:bg-gray-600 hover:shadow-lg" (click)="exitCart()">                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />                </svg>                <span>Salir del carrito</span>              </button>            </app-qr-display>          </div>        }      </div>    </div>  </div></main></div>'
    var COMPONENTS = [{'name': 'App', 'selector': 'app-root'},{'name': 'BusinessCardComponent', 'selector': 'app-service-card'},{'name': 'CallCenterComponent', 'selector': 'app-call-center'},{'name': 'CheckoutWizardComponent', 'selector': 'app-checkout-wizard'},{'name': 'CobranzaWizardComponent', 'selector': 'app-cobranza-wizard'},{'name': 'ConfirmationModalComponent', 'selector': 'app-confirmation-modal'},{'name': 'ContactCard', 'selector': 'app-contact-card'},{'name': 'ContactsComponent', 'selector': 'app-contacts'},{'name': 'ContractSelectorComponent', 'selector': 'app-contract-selector'},{'name': 'DebtTableComponent', 'selector': 'app-debt-table'},{'name': 'ErrorAlertComponent', 'selector': 'app-error-alert'},{'name': 'ErrorModalComponent', 'selector': 'app-error-modal'},{'name': 'HeaderComponent', 'selector': 'app-header'},{'name': 'HomePageComponent', 'selector': 'app-home-page'},{'name': 'LoadingComponent', 'selector': 'app-loading'},{'name': 'MainLayoutComponent', 'selector': 'app-main-layout'},{'name': 'NotFoundPageComponent', 'selector': 'app-not-found'},{'name': 'ProximamentePageComponent', 'selector': 'app-proximamente-page'},{'name': 'QrDisplayComponent', 'selector': 'app-qr-display'},{'name': 'SearchAssociateComponent', 'selector': 'app-search-associate'},{'name': 'StepCard', 'selector': 'app-step-card'},{'name': 'TemplatePlaygroundComponent', 'selector': 'template-playground-root'},{'name': 'WizardHeaderComponent', 'selector': 'app-wizard-header'},{'name': 'WizardNavComponent', 'selector': 'app-wizard-nav'},{'name': 'WizardProgressComponent', 'selector': 'app-wizard-progress'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'CheckoutWizardComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'CheckoutWizardComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
