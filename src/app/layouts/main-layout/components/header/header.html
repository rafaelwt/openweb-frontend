<header class="bg-redis fixed top-0 right-0 left-0 z-50 h-17.5 shadow-md dark:bg-gray-800">
  <div class="mx-auto h-full max-w-7xl px-4">
    <div class="flex h-full items-center justify-between">
      <!-- REDIS logo -->
      <div class="relative shrink-0" (mouseenter)="showLogoTooltip.set(true)" (mouseleave)="showLogoTooltip.set(false)">
        <a routerLink="/" [class.cursor-pointer]="!isRouteActive('/')" [class.cursor-default]="isRouteActive('/')">
          <img ngSrc="/img/logo-redis.png" alt="Logo REDIS" width="213" height="48" priority />
        </a>

        <!-- Tooltip logo -->
        @if (showLogoTooltip()) {
          <div class="absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">
            <span>{{ isRouteActive('/') ? 'Simple y sencillo' : 'Ir al escritorio' }}</span>
            <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>
          </div>
        }
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden items-center space-x-4 sm:flex">
        <!-- Toggle theme -->
        <div class="relative" (mouseenter)="showThemeTooltip.set(true)" (mouseleave)="showThemeTooltip.set(false)">
          <button type="button" class="group flex h-11 w-11 items-center justify-center rounded-full transition-colors hover:bg-white" (click)="theme.toggle()">
            <!-- Sun (show in dark mode) -->
            @if (theme.isDarkMode()) {
              <svg class="h-8 w-8 text-white transition-colors group-hover:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
              </svg>
            } @else {
              <!-- Moon (show in light mode) -->
              <svg class="h-8 w-8 text-white transition-colors group-hover:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
              </svg>
            }
          </button>

          <!-- Tooltip theme -->
          @if (showThemeTooltip()) {
            <div class="absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">
              <span>{{ theme.isDarkMode() ? 'Cambiar a tema claro' : 'Cambiar a tema oscuro' }}</span>
              <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>
            </div>
          }
        </div>

        <!-- Call center link -->
        <div class="relative" (mouseenter)="showCallCenterTooltip.set(true)" (mouseleave)="showCallCenterTooltip.set(false)">
          <a routerLink="/soporte/callcenter" routerLinkActive="bg-yellow-400" [routerLinkActiveOptions]="{ exact: true }" class="group flex h-11 w-11 items-center justify-center rounded-full transition-colors hover:bg-white" [class.cursor-pointer]="!isRouteActive('/soporte/callcenter')" [class.cursor-default]="isRouteActive('/soporte/callcenter')">
            <svg class="h-8 w-8 text-white transition-colors group-hover:text-yellow-400" routerLinkActive="text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 23">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
          </a>

          <!-- Tooltip Call center -->
          @if (showCallCenterTooltip()) {
            <div class="absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">
              <span>{{ isRouteActive('/soporte/callcenter') ? 'en Pantalla' : 'Consultas y reclamos' }}</span>
              <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>
            </div>
          }
        </div>

        <!-- Contacts link -->
        <div class="relative" (mouseenter)="showContactTooltip.set(true)" (mouseleave)="showContactTooltip.set(false)">
          <a routerLink="/soporte/contactos" routerLinkActive="bg-yellow-400" [routerLinkActiveOptions]="{ exact: true }" class="group flex h-11 w-11 items-center justify-center rounded-full transition-colors hover:bg-white" [class.cursor-pointer]="!isRouteActive('/soporte/contactos')" [class.cursor-default]="isRouteActive('/soporte/contactos')">
            <svg class="h-10 w-10 text-white transition-colors group-hover:text-yellow-400" routerLinkActive="text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
            </svg>
          </a>

          <!-- Tooltip Contacts -->
          @if (showContactTooltip()) {
            <div class="absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">
              <span>{{ isRouteActive('/soporte/contactos') ? 'en Pantalla' : 'Ver contactos' }}</span>
              <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>
            </div>
          }
        </div>

        <!-- Cart link -->
        <div class="relative" (mouseenter)="showCartTooltip.set(true)" (mouseleave)="showCartTooltip.set(false)">
          <a routerLink="/carrito" routerLinkActive="bg-yellow-400" [routerLinkActiveOptions]="{ exact: true }" class="group flex h-11 w-11 items-center justify-center rounded-full transition-colors hover:bg-white" [class.cursor-pointer]="!isRouteActive('/carrito')" [class.cursor-default]="isRouteActive('/carrito')">
            <svg class="h-8 w-8 text-white transition-colors group-hover:text-yellow-400" routerLinkActive="text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>

            <!-- Badge counter -->
            @if (cartItemCount() > 0) {
              <span class="absolute -top-1 -right-1 flex h-5 min-w-5 items-center justify-center rounded-full bg-red-600 px-1 text-xs font-bold text-white">
                {{ cartItemCount() }}
              </span>
            }
          </a>

          <!-- Tooltip Cart -->
          @if (showCartTooltip()) {
            <div class="absolute top-full left-1/2 z-50 mt-2 -translate-x-1/2 rounded-md bg-gray-800 px-3 py-1.5 text-sm whitespace-nowrap text-white shadow-lg dark:bg-gray-700">
              <span>{{ isRouteActive('/carrito') ? 'en Pantalla' : cartItemCount() > 0 ? 'Ver carrito (' + cartItemCount() + ')' : 'Carrito vacio' }}</span>
              <div class="absolute -top-1 left-1/2 h-2 w-2 -translate-x-1/2 rotate-45 bg-gray-800 dark:bg-gray-700"></div>
            </div>
          }
        </div>
      </nav>

      <!-- Mobile Menu button (Hamburger) -->
      <button type="button" class="hover:bg-redis/80 flex h-10 w-10 items-center justify-center rounded transition-colors sm:hidden" aria-label="Menu de navegacion" [attr.aria-expanded]="mobileMenuOpen()" (click)="mobileMenuOpen.set(!mobileMenuOpen())">
        <div class="space-y-1.5">
          <span class="block h-0.5 w-6 bg-white"></span>
          <span class="block h-0.5 w-6 bg-white"></span>
          <span class="block h-0.5 w-6 bg-white"></span>
        </div>
      </button>
    </div>

    <!-- Mobile Menu dropdown -->
    @if (mobileMenuOpen()) {
      <div class="absolute top-17.5 right-0 left-0 bg-white pt-2 shadow-lg sm:hidden dark:bg-gray-800">
        <!-- Toggle theme (Mobile) -->
        <button type="button" class="flex w-full items-center px-4 pt-3 text-base text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700" (click)="theme.toggle()">
          @if (theme.isDarkMode()) {
            <svg class="mr-3 h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
            </svg>
            <span>Cambiar a tema claro</span>
          } @else {
            <svg class="mr-3 h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
            </svg>
            <span>Cambiar a tema oscuro</span>
          }
        </button>

        <!-- Call center link (Mobile) -->
        <a routerLink="/soporte/callcenter" class="flex items-center px-4 py-3 text-base text-gray-700 transition-colors hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700" (click)="mobileMenuOpen.set(false)">
          <svg class="mr-3 h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span>Consultas y reclamos</span>
        </a>

        <!-- Contacts link (Mobile) -->
        <a routerLink="/soporte/contactos" class="flex items-center px-4 py-3 text-base text-gray-700 transition-colors hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700" (click)="mobileMenuOpen.set(false)">
          <svg class="mr-3 h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
          </svg>
          <span>Ver contactos</span>
        </a>

        <!-- Cart link (Mobile) -->
        <a routerLink="/carrito" class="flex items-center border-b-2 border-gray-100 px-4 pb-4 text-base text-gray-700 shadow-xl transition-colors hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700" (click)="mobileMenuOpen.set(false)">
          <div class="relative mr-3">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            @if (cartItemCount() > 0) {
              <span class="absolute -top-2 -right-2 flex h-4.5 min-w-4.5 items-center justify-center rounded-full bg-red-600 px-1 text-xs font-bold text-white">
                {{ cartItemCount() }}
              </span>
            }
          </div>
          <span>Ver carrito</span>
        </a>
      </div>
    }
  </div>
</header>
